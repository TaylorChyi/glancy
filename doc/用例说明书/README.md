# 用例清单与优先级基线

> 本基线由《需求说明书》（SRS）第 4 章“业务流程与用例”、第 8 章“接口与数据契约”、第 20 章“验收标准与测试方案”抽取，所有条目均可直接映射到 `doc/用例说明书/模板.md` 的字段。优先级用于排期与验收，需保持 UC→FR→AC 的全链路可追踪。

## 优先级定义
- **P0**：MVP 必须交付的关键路径，影响核心业务或合规门槛。
- **P1**：高相关支撑能力，可与 P0 并行开发，允许在灰度期间补齐。
- **P2**：增强或长尾场景，可在正式发布后迭代。

## 用例一览

| UC ID | 用例名称 | 优先级 | 覆盖核心流程 | 关联章节（SRS 4 / 8 / 20） | 关键验收 / 备注 |
| ----- | -------- | ------ | ------------ | ------------------------ | --------------- |
| UC-01 | 词典查询与上下文缓存 | P0 | 词典查询 | 4.2.2 / 8.4 / 20.3 | 首屏 P95 ≤ 2.0s，`glancy.dict.v1.lookup` 契约完整。 |
| UC-02 | 流式渲染与降级兜底 | P0 | 流式渲染 | 4.2.2 / 8.4 / 20.4 | 分片准实时（≤150ms 间隔），触发 UC-02 异常流时退化到基础释义。 |
| UC-03 | 历史导出任务（CSV / JSON） | P0 | 导出 | 4.2.4 / 8.5 / 20.7 | 导出任务 ≤5s 返回回执，链接 TTL 10 分钟，遵循 `history.exportReceipt` 契约。 |
| UC-04 | 订阅开通 / 升降级同步 | P0 | 订阅变更 | 4.2.6 / 8.8 / 20.12 | 权益更新 ≤5s，幂等校验，配额与权益矩阵一致。 |
| UC-05 | 支付与账单对账 | P0 | 支付 | 4.2.6 / 8.8 / 20.12 | 支付成功单据落库，回调失败自动重试，账单导出与对账完成。 |

## 核心流程覆盖校验
- **词典查询**：UC-01 提供完整查询、缓存、配额流程。
- **流式渲染**：UC-02 保证流式首屏、分片节奏与降级策略。
- **导出**：UC-03 覆盖异步任务、回执与一次性链接管理。
- **订阅变更**：UC-04 涵盖订阅开通、升级、降级及权益同步。
- **支付**：UC-05 约束支付链路、账单记录与对账要求。

> 使用 `模板.md` 时，请保持 UC ID、优先级与此表一致，以便在 SRS 第 20 章中建立 AC 映射并与测试计划对齐。
