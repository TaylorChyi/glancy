# 用例清单与优先级

> 本清单由 SRS 第 4、8、20 章抽取，可直接映射到 `doc/用例说明书/模板.md`。优先级用于排期与验收串联，需与 UC→FR→AC 的追踪矩阵一致。

## 优先级定义
- **P0**：MVP 必须实现与验收的核心路径，影响核心流程或合规门槛。
- **P1**：强相关支撑能力，可与 P0 并行开发，但允许在灰度期间补齐。
- **P2**：增强或长尾场景，允许在正式发布后迭代。

## 用例一览

| UC ID | 用例名称 | 优先级 | 核心流程覆盖 | 关联章节（4 / 8 / 20） | 关键验收 / 备注 |
| ----- | -------- | ------ | ------------ | ---------------------- | --------------- |
| UC-01 | 词典查询与流式渲染 | P0 | 词典查询、流式渲染、配额回执 | 4.2.2 / 8.4 / 20.3 | 首屏 P95 ≤ 2.5s，`glancy.dict.v1` 契约、Quota Header 完整。 |
| UC-02 | 再生成例句 | P0 | 再生成、变体多样性 | 4.2.3 / 8.4 / 20.3 | 再生成配额独立统计，单次 ≤ 1.0s。 |
| UC-03 | 难度/风格切换 | P0 | 图形化风格切换（计入再生成） | 4.2.3 / 8.4 / 20.3 | 难度/风格映射继承画像，Quota 类型 `regenerate`。 |
| UC-04 | 查看与筛选历史 | P1 | 历史浏览、分页 | 4.2.4 / 8.5 / 20.7 | 游标分页、脱敏字段、同语模式兼容。 |
| UC-05 | 清理历史（按语言/全部） | P1 | 历史删除、T+7d 物理清理 | 4.2.4 / 8.5 / 20.7 | 逻辑删即时、物理清理延迟、可恢复窗口提示。 |
| UC-06 | 导出历史（CSV/JSON） | P0 | 核心导出流程 | 4.2.4 / 8.5 / 20.7 | ≤5s 返回回执与一次性链接，TTL 10 分钟。 |
| UC-07 | 设置个性化画像 | P1 | 画像/偏好管理 | 4.2.5 / 8.4 / 20.5 | 画像影响 Prompt，Plus/Pro 开启扩展字段。 |
| UC-08 | 订阅开通/续费（含支付） | P0 | 订阅变更、支付、权益同步 | 4.2.6 / 8.8 / 20.12 | 支付成功 ≤5s 生效，订单幂等，支付异常回调兜底。 |
| UC-09 | 到期自动降级 | P0 | 订阅变更、降级提醒 | 4.2.6 / 8.8 / 20.12 | 到期/Grace 自动生效，权益边界同步。 |
| UC-10 | 登录/注册（邮箱/第三方） | P1 | 会话建立、条款同意 | 4.2.1 / 8.1 / 20.11 | 匿名/登录合并、条款记录、风险控制。 |
| UC-11 | 无痕查询 | P2 | 无痕/隐私场景 | 4.2.2 / 8.4 / 20.11 | 不落历史，仍计配额，提示导出不可用。 |
| UC-12 | 切换语言对并重查 | P1 | 多语言切换 | 4.2.2 / 8.4 / 20.3 | 清理语言相关缓存键，重查同 UC-01。 |
| UC-13 | 限流/配额用尽提示 | P1 | 限流提示、升级入口 | 4.2.7 / 8.1 / 20.3 | HTTP 429 附剩余额度/重置时间，提示升级订阅。 |
| UC-14 | 降级与熔断回退 | P0 | 异常降级、防护 | 4.2.7 / 8.4 / 20.3 | 基础释义+模板例句，退化徽标、半开探测。 |
| UC-15 | 账单与收据查看 | P1 | 支付凭证、收据下载 | 4.2.6 / 8.8 / 20.12 | 展示档位、订单号、导出 PDF/邮件。 |
| UC-16 | 撤回隐私同意与数据删除 | P2 | GDPR/隐私合规 | 4.2.4 / 8.5 / 20.11 | 撤回即停用非必要处理，删除按逻辑删+T+7d。 |

## 核心流程覆盖记录
- **词典查询**：UC-01（含流式渲染与缓存策略）。
- **流式渲染**：UC-01、UC-14 共同保障首屏渲染与降级体验。
- **导出**：UC-06（含 CSV/JSON、TTL 与异步回执）。
- **订阅变更**：UC-08（开通/续费）与 UC-09（自动降级）。
- **支付**：UC-08 / UC-15（收据）覆盖支付链路与凭证展示。

> 填写单个用例时，请复制 `模板.md`，并保持 UC ID、优先级与本表一致，以便在 SRS 第 20 章中建立 AC 映射与测试计划。

