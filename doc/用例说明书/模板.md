# 用例说明书模板（Use Case Specification Template）

> 关联 SRS：第 4 章《业务流程与用例》、第 8 章《接口与数据契约（APISchema）》、第 20 章《验收标准与测试方案（UC 对齐）》。请在填写时引用相应章节的 ID/术语，确保 UC→FR→AC 全链路可追溯。

## 字段与 SRS 对照

| 模板字段         | 对应 SRS 章节                        | 关键引用/提示                                                   |
| ---------------- | ------------------------------------ | -------------------------------------------------------------- |
| 目的             | 第 4 章 4.2–4.5                       | 复用 UC-XX 目标描述，突出业务价值与触达范围。                       |
| 参与者           | 第 4 章 4.1                           | 泳道/角色名称需与 4.1 表格一致（用户、前端、词典后端、Doubao、支付等）。 |
| 前置条件         | 第 4 章 4.2 / 4.3                     | 枚举必备状态、配额、登录态、白名单语言对等。                        |
| 触发             | 第 4 章 4.2                            | 给出用户动作或系统事件的触发点，引用相关步骤号。                  |
| 主成功场景       | 第 4 章 4.2–4.5                       | 以 1…n 步骤描述 Happy Path，引用缓存/画像/熔断等关键环节。          |
| 备选/异常流      | 第 4 章 4.2–4.5                       | 标明分支条件（如 2a、3b），引导到 UC-13、UC-14 等。                |
| 后置条件         | 第 4 章 4.2 / 4.3                     | 说明状态更新、配额消耗、记录落库、回执等结果。                     |
| 业务规则         | 第 4 章 4.2 / 4.6                     | 引用 BR、配额、订阅矩阵或 FR 映射。                               |
| 数据契约引用     | 第 8 章 8.1–8.9                       | 列出 API/Schema 名称（如 API-001、DictResult、glancy.dict.v1 等）。|
| 非功能约束       | 第 20 章 20.3–20.5（承接第 6 章 NFR） | 写明性能、可用性、降级、配额、流式指标等门槛。                     |
| AC（验收标准）   | 第 20 章 20.3–20.17                  | 采用 Given/When/Then 或条列式，与测试用例 ID 对齐。               |
| 备注             | 第 4 章 4.7–4.8 / 第 20 章 20.14     | 记录日志、观测、依赖或 TODO，链接 Runbook/监控。                  |

---

## 基本信息
- `UC ID`：
- `用例名称`：
- `所属模块/史诗`：
- `优先级`：P0 / P1 / P2 （需与 `doc/用例说明书/README.md` 中的一致）
- `版本 / 修订历史`：示例 `v1.0（2024-05-01，@owner）`

## 1. 目的（SRS 第 4 章）
> 描述该 UC 存在的业务目标、触达角色、关联 KPI。引用 4.2.x 的原句或作业流摘要。

## 2. 参与者（SRS 第 4 章 4.1）
- Primary：
- Supporting：
- External Systems：

## 3. 前置条件（SRS 第 4 章）
- 条目 1
- 条目 2

## 4. 触发（SRS 第 4 章）
- 用户动作 / 定时事件 / Webhook

## 5. 主成功场景（SRS 第 4 章）
1. 步骤 1
2. 步骤 2
3. …

## 6. 备选 / 异常流（SRS 第 4 章）
- 2a 条件 → 结果 / 跳转 UC-XX
- 3b 条件 → 结果 / 错误码

## 7. 后置条件（SRS 第 4 章）
- 状态 / 数据库变化
- 配额 / 缓存 / 通知

## 8. 业务规则（SRS 第 4 章 & 第 5 章占位）
- BR-xx：描述（引用订阅矩阵、限流、隐私等）
- FR 映射：UC→FR 列表（如 FR-01、FR-02）

## 9. 数据契约引用（SRS 第 8 章）
- API-xxx：`METHOD /path`，字段约束
- Schema：`glancy.dict.v1.DictResult`、`history.exportReceipt` 等

## 10. 非功能约束（SRS 第 20 章 20.3–20.5）
- 性能：P95 ≤ … s；流式丢段率 ≤ …
- 可用性 / 降级：`UC-14` 触发条件
- 安全 / 合规：TLS、日志脱敏等

## 11. 验收标准 AC（SRS 第 20 章 20.3–20.17）
- Given … When … Then …
- AC-XX：描述（引用 TC-ID，如 `TC-API-001`）

## 12. 备注（SRS 第 4 章 4.7–4.8 & 第 20 章 20.14）
- 观测指标、事件代码、Runbook 链接、已知风险

