# 第 1 章 引言

## 1.1 文档目的

本章明确 Glancy 个性化电子词典在 MVP 阶段的目标、实现范围、关键约束与成功标准。文本作为产品、设计、研发、测试、运营与法务的统一依据，确保需求明确、可落地、可验收与可追溯。

## 1.2 项目概述与愿景

| 主题     | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| 项目概述 | Glancy 是个性化电子词典。系统接入 Doubao API，通过提示词模板与用户画像生成贴合学习目标与近期查词历史的释义与例句。系统输出以理解效率为核心目标。 |
| 核心价值 | 提升可理解度与相关性，提供直接的输出结构，降低使用门槛与配置成本。 |
| 产品愿景 | 实现“查询即理解”，为后续记忆与复习能力预留数据与接口基础。   |

## 1.3 读者对象与阅读建议

| 读者角色     | 关注重点                                                     |
| ------------ | ------------------------------------------------------------ |
| 产品与交互   | 实现范围、输出结构、分层能力                                 |
| 前端与 H5 端 | 输入校验、模块渲染、设置项、语言切换                         |
| 后端与平台   | 账户体系、订阅、配额、历史记录、数据控制、第三方登录与支付对接 |
| 提示词工程   | 语言对白名单、例句生成控制、风格控制、难度控制               |
| 测试与验收   | 输入限制、分层配额、清理规则、导出能力                       |
| 法务与合规   | 使用条款、隐私政策、数据主体权利、留存与清理策略             |

## 1.4 实现范围

本节仅呈现 MVP 阶段的实现内容。输入仅接受单词或词组，若用户输入整句，系统提示改为词或词组。

### 1.4.1 语言对白名单

| 序号 | 语言对  | 模式说明                |
| ---- | ------- | ----------------------- |
| L1   | zh → en | zh 到 en 翻译           |
| L2   | en → zh | en 到 zh 翻译           |
| L3   | en → en | en 到 en 同语释义与例句 |
| L4   | zh → zh | zh 到 zh 同语释义与例句 |

同语模式不显示译文。

### 1.4.2 输入与查词规则

| 项目     | 规定                                                         |
| -------- | ------------------------------------------------------------ |
| 输入类型 | 仅接受单词或词组                                             |
| 句子输入 | 不接受，提示用户改为词或词组                                 |
| 上下文   | 支持简短词组输入以提升相关性                                 |
| 输出范围 | 词典具备的模块全部可输出，默认全部开启。用户可在设置中调整模块开关、顺序与详略级别 |
| 释义呈现 | 展示多义项并按相关性排序，不提供原因说明                     |
| 译文显示 | 默认显示译文，en → en 与 zh → zh 模式不显示译文              |

### 1.4.3 分层功能说明

再生成次数为全局日配额，用尽后次日恢复。

#### 1.4.3.1 普通档

**个性化例句**

| 项目     | 配置                                    |
| -------- | --------------------------------------- |
| 例句条数 | 默认 1 条，不可调                       |
| 译文     | 默认显示，en → en 与 zh → zh 不显示译文 |
| 难度切换 | 支持更简单或更难                        |
| 风格切换 | 支持口语、书面、学术、商务              |
| 再生成   | 1 次 / d                                |

**结果页模块**

| 模块               | 默认状态 | 优先级 | 默认条数或长度 | 详略级别 | 说明               |
| ------------------ | -------- | ------ | -------------- | -------- | ------------------ |
| 释义与义项         | 开启     | 1      | 3 个义项       | 中       | 按相关性排序       |
| 个性化例句         | 开启     | 2      | 1 条           | 中       | 支持难度与风格切换 |
| 常见搭配与固定搭配 | 开启     | 3      | 3 条           | 短       | 可展开更多         |
| 同义词与反义词     | 开启     | 5      | 4 项           | 短       | 词汇拓展           |
| 派生与词族         | 开启     | 6      | 2 项           | 短       | 展示形态关联       |

**历史记录与数据控制**

| 项目       | 配置                                     |
| ---------- | ---------------------------------------- |
| 是否保存   | 默认开启，可关闭或启用无痕查询           |
| 留存策略   | 默认 10 d，上限 100 条，超限自动滚动清理 |
| 按语言清理 | 可清理 zh 组、清理 en 组或全部清空       |
| 导出能力   | CSV                                      |
| 删除语义   | 立即逻辑删除，物理清理延迟 7 d 执行      |

**个性化画像与风格偏好**

| 项目     | 内容                                                         |
| -------- | ------------------------------------------------------------ |
| 学习目标 | 支持考试、学术、职场、旅行、日常交流、阅读、写作，多选并可排序 |
| 专业背景 | 支持信息技术、金融、教育、医疗、法律、制造、媒体、艺术、其他，多选并可排序 |
| 年龄层次 | 0–11 岁、12–17 岁、18–24 岁、25–34 岁、35–44 岁、45 岁及以上，仅用于匹配，不对外展示 |
| 当前水平 | 支持 CEFR A1–C2、IELTS 总分与单项分、TOEFL iBT 总分与单项分、CET 分数、自评 1–10 分，用于可读性映射 |
| 语言对   | 用户从语言对白名单选择                                       |
| 风格标签 | 支持语域、体裁、语气、主题，多选并可排序，上限 3 个          |

#### 1.4.3.2 Plus 档

**个性化例句**

| 项目     | 配置                                    |
| -------- | --------------------------------------- |
| 例句条数 | 默认 3 条，可调 1–3 条                  |
| 译文     | 默认显示，en → en 与 zh → zh 不显示译文 |
| 难度切换 | 支持更简单或更难                        |
| 风格切换 | 支持口语、书面、学术、商务              |
| 再生成   | 10 次 / d                               |

**结果页模块**

| 模块               | 默认状态 | 优先级 | 默认条数或长度 | 详略级别 | 自定义能力                       |
| ------------------ | -------- | ------ | -------------- | -------- | -------------------------------- |
| 释义与义项         | 开启     | 1      | 3 个义项       | 中       | 模块开关可调，顺序可调，详略可调 |
| 个性化例句         | 开启     | 2      | 3 条           | 中       | 模块开关可调，顺序可调，详略可调 |
| 常见搭配与固定搭配 | 开启     | 3      | 3 条           | 短       | 模块开关可调，顺序可调，详略可调 |
| 同义词与反义词     | 开启     | 5      | 4 项           | 短       | 模块开关可调，顺序可调，详略可调 |
| 派生与词族         | 开启     | 6      | 2 项           | 短       | 模块开关可调，顺序可调，详略可调 |

**历史记录与数据控制**

| 项目       | 配置                                      |
| ---------- | ----------------------------------------- |
| 是否保存   | 默认开启，可关闭或启用无痕查询            |
| 留存策略   | 默认 90 d，上限 1000 条，超限自动滚动清理 |
| 按语言清理 | 可清理 zh 组、清理 en 组或全部清空        |
| 导出能力   | CSV 与 JSON，支持基础过滤                 |
| 删除语义   | 立即逻辑删除，物理清理延迟 7 d 执行       |

**个性化画像与风格偏好**

| 项目     | 内容                                                         |
| -------- | ------------------------------------------------------------ |
| 学习目标 | 支持考试、学术、职场、旅行、日常交流、阅读、写作，多选并可排序 |
| 专业背景 | 支持信息技术、金融、教育、医疗、法律、制造、媒体、艺术、其他，多选并可排序 |
| 年龄层次 | 0–11 岁、12–17 岁、18–24 岁、25–34 岁、35–44 岁、45 岁及以上，仅用于匹配，不对外展示 |
| 当前水平 | 支持 CEFR A1–C2、IELTS 总分与单项分、TOEFL iBT 总分与单项分、CET 分数、自评 1–10 分，用于可读性映射 |
| 语言对   | 用户从语言对白名单选择                                       |
| 风格标签 | 支持语域、体裁、语气、主题，多选并可排序，上限 5 个          |

#### 1.4.3.3 Pro 档

**个性化例句**

| 项目     | 配置                                    |
| -------- | --------------------------------------- |
| 例句条数 | 默认 5 条，可调 1–5 条                  |
| 译文     | 默认显示，en → en 与 zh → zh 不显示译文 |
| 难度切换 | 支持更简单或更难                        |
| 风格切换 | 支持口语、书面、学术、商务              |
| 再生成   | 20 次 / d                               |

**结果页模块**

| 模块               | 默认状态 | 优先级 | 默认条数或长度 | 详略级别 | 自定义能力                                       |
| ------------------ | -------- | ------ | -------------- | -------- | ------------------------------------------------ |
| 释义与义项         | 开启     | 1      | 3 个义项       | 中       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好 |
| 个性化例句         | 开启     | 2      | 5 条           | 中       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好 |
| 常见搭配与固定搭配 | 开启     | 3      | 3 条           | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好 |
| 同义词与反义词     | 开启     | 5      | 4 项           | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好 |
| 派生与词族         | 开启     | 6      | 2 项           | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好 |

**历史记录与数据控制**

| 项目       | 配置                                |
| ---------- | ----------------------------------- |
| 是否保存   | 默认开启，可关闭或启用无痕查询      |
| 留存策略   | 永久保留，用户主动清理前不自动删除  |
| 按语言清理 | 可清理 zh 组、清理 en 组或全部清空  |
| 导出能力   | CSV 与 JSON，支持条件过滤与批量导出 |
| 删除语义   | 立即逻辑删除，物理清理延迟 7 d 执行 |

**个性化画像与风格偏好**

| 项目     | 内容                                                         |
| -------- | ------------------------------------------------------------ |
| 学习目标 | 支持考试、学术、职场、旅行、日常交流、阅读、写作，多选并可排序 |
| 专业背景 | 支持信息技术、金融、教育、医疗、法律、制造、媒体、艺术、其他，多选并可排序 |
| 年龄层次 | 0–11 岁、12–17 岁、18–24 岁、25–34 岁、35–44 岁、45 岁及以上，仅用于匹配，不对外展示 |
| 当前水平 | 支持 CEFR A1–C2、IELTS 总分与单项分、TOEFL iBT 总分与单项分、CET 分数、自评 1–10 分，用于可读性映射 |
| 语言对   | 用户从语言对白名单选择                                       |
| 风格标签 | 支持语域、体裁、语气、主题，多选并可排序，上限 8 个          |

**统一详略级别基线**

| 级别 | 中文字符上限 | 英文字符上限 |
| ---- | ------------ | ------------ |
| 短   | 80 字符      | 120 字符     |
| 中   | 150 字符     | 220 字符     |
| 长   | 220 字符     | 320 字符     |

### 1.4.4 订阅与权益概览

| 能力项             | 普通档         | Plus 档         | Pro 档                     |
| ------------------ | -------------- | --------------- | -------------------------- |
| 每日查词上限       | 30 次 / d      | 100 次 / d      | 500 次 / d                 |
| 每次例句数量       | 1 条固定       | 3 条可调 1–3 条 | 5 条可调 1–5 条            |
| 再生成次数         | 1 次 / d       | 10 次 / d       | 20 次 / d                  |
| 历史留存默认与上限 | 10 d 与 100 条 | 90 d 与 1000 条 | 永久                       |
| 风格标签上限       | 3 个           | 5 个            | 8 个                       |
| 输出模块自定义     | 基础开关       | 高级自定义      | 高级自定义与词条级记忆偏好 |
| 导出能力           | CSV            | CSV 与 JSON     | CSV 与 JSON 条件过滤       |
| 并发与限速         | 基础           | 较宽            | 宽                         |

### 1.4.5 支付与账单

| 项目           | 说明                                       |
| -------------- | ------------------------------------------ |
| 订阅开通与续费 | 支付成功后权限即时生效。                   |
| 到期处理       | 到期后自动降级并同步能力边界。             |
| 账单与收据     | 展示订阅档位、生效时间、到期时间与订单号。 |
| 退款与异常     | 遵循目标平台规则，保持状态与权限幂等同步。 |

### 1.4.6 通用设置

| 设置项   | 取值                     | 默认值   |
| -------- | ------------------------ | -------- |
| 主题     | 浅色、深色、跟随系统     | 跟随系统 |
| 快捷键   | 提供默认方案，允许自定义 | 开启     |
| 界面语言 | zh、en                   | zh       |

### 1.4.7 技术实现最小集

| 模块            | 要求                                                         |
| --------------- | ------------------------------------------------------------ |
| Doubao API 适配 | 提供稳定封装、重试、超时、错误语义化、结构化契约与解析容错。 |
| 缓存与降级      | 对同一用户、同一词条、同一配置提供短时缓存。外部异常时降级为基础释义与模板例句并提示。 |
| 账户与订阅      | 提供注册、登录、第三方登录（微信、Apple、Google）。订阅状态与权限实时同步与对账。 |
| 历史记录        | 提供保存、清理、导出功能，支持按语言清理与全部清空。         |

## 1.5 文档约定

| 项目       | 规范                                                         |
| ---------- | ------------------------------------------------------------ |
| 需求编号   | 功能性需求使用前缀 FR 编号，非功能性需求使用前缀 NFR 编号，用例使用前缀 UC 编号，接口使用前缀 API 编号。 |
| 优先级     | 使用 Must、Should、Could、Will not 四级。                    |
| 时间与度量 | 响应时间使用 ms 或 s，容量使用 KB 或 MB，百分比保留 2 位小数。时间使用 UTC 存储，前端按本地时区渲染。 |

## 1.6 成功标准与关键指标

| 类别       | 指标                 | 目标              |
| ---------- | -------------------- | ----------------- |
| 性能       | 首屏查词端到端 P95   | ≤ 2.5 s           |
| 性能       | 首屏查词平均值       | ≤ 1.2 s           |
| 质量       | 结构化输出正确率     | ≥ 99%             |
| 质量       | 例句可理解度正反馈   | ≥ 80%             |
| 账号与订阅 | 登录成功率           | ≥ 99%             |
| 账号与订阅 | 订阅开通与续费成功率 | ≥ 98%             |
| 数据控制   | 清理与导出完成时间   | ≤ 5 s，并提供回执 |
| 数据控制   | 无痕查询留存         | 0 条              |

## 1.7 项目边界与基本假设

# 第 1 章 引言

## 1.1 文档目的

本章明确 Glancy 个性化电子词典在 MVP 阶段的目标、实现范围、关键约束与成功标准。文本作为产品、设计、研发、测试、运营与法务的统一依据，确保需求明确、可落地、可验收与可追溯。

## 1.2 项目概述与愿景

| 主题     | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| 项目概述 | Glancy 是个性化电子词典。系统接入 Doubao API，通过提示词模板与用户画像生成贴合学习目标与近期查词历史的释义与例句。系统输出以理解效率为核心目标。 |
| 核心价值 | 提升可理解度与相关性，提供直接的输出结构，降低使用门槛与配置成本。 |
| 产品愿景 | 实现“查询即理解”，为后续记忆与复习能力预留数据与接口基础。   |

## 1.3 读者对象与阅读建议

| 读者角色     | 关注重点                                                     |
| ------------ | ------------------------------------------------------------ |
| 产品与交互   | 实现范围、输出结构、分层能力                                 |
| 前端与移动端 | 输入校验、模块渲染、设置项、语言切换                         |
| 后端与平台   | 账户体系、订阅、配额、历史记录、数据控制、第三方登录与支付对接 |
| 提示词工程   | 语言对白名单、例句生成控制、风格控制、难度控制               |
| 测试与验收   | 输入限制、分层配额、清理规则、导出能力                       |
| 法务与合规   | 使用条款、隐私政策、数据主体权利、留存与清理策略             |

## 1.4 实现范围

本节仅呈现 MVP 阶段的实现内容。输入仅接受单词或词组，若用户输入整句，系统提示改为词或词组。

### 1.4.1 语言对白名单

| 序号 | 语言对  | 模式说明                |
| ---- | ------- | ----------------------- |
| L1   | zh → en | zh 到 en 翻译           |
| L2   | en → zh | en 到 zh 翻译           |
| L3   | en → en | en 到 en 同语释义与例句 |
| L4   | zh → zh | zh 到 zh 同语释义与例句 |

同语模式不显示译文。

### 1.4.2 输入与查词规则

| 项目     | 规定                                                         |
| -------- | ------------------------------------------------------------ |
| 输入类型 | 仅接受单词或词组                                             |
| 句子输入 | 不接受，提示用户改为词或词组                                 |
| 上下文   | 支持简短词组输入以提升相关性                                 |
| 输出范围 | 词典具备的模块全部可输出，默认全部开启。用户可在设置中调整模块开关、顺序与详略级别 |
| 释义呈现 | 展示多义项并按相关性排序，不提供原因说明                     |
| 译文显示 | 默认显示译文，en → en 与 zh → zh 模式不显示译文              |

### 1.4.3 分层功能说明

再生成次数为全局日配额，用尽后次日恢复。

#### 1.4.3.1 普通档

**个性化例句**

| 项目     | 配置                                    |
| -------- | --------------------------------------- |
| 例句条数 | 默认 1 条，不可调                       |
| 译文     | 默认显示，en → en 与 zh → zh 不显示译文 |
| 难度切换 | 支持更简单或更难                        |
| 风格切换 | 支持口语、书面、学术、商务              |
| 再生成   | 1 次 / d                                |

**结果页模块**

| 模块               | 默认状态 | 优先级 | 默认条数或长度 | 详略级别 | 说明               |
| ------------------ | -------- | ------ | -------------- | -------- | ------------------ |
| 释义与义项         | 开启     | 1      | 3 个义项       | 中       | 按相关性排序       |
| 个性化例句         | 开启     | 2      | 1 条           | 中       | 支持难度与风格切换 |
| 常见搭配与固定搭配 | 开启     | 3      | 3 条           | 短       | 可展开更多         |
| 同义词与反义词     | 开启     | 5      | 4 项           | 短       | 词汇拓展           |
| 派生与词族         | 开启     | 6      | 2 项           | 短       | 展示形态关联       |
| 频率与考试标签     | 开启     | 7      | 徽标展示       | 短       | 暂不实现           |

**历史记录与数据控制**

| 项目       | 配置                                     |
| ---------- | ---------------------------------------- |
| 是否保存   | 默认开启，可关闭或启用无痕查询           |
| 留存策略   | 默认 10 d，上限 100 条，超限自动滚动清理 |
| 按语言清理 | 可清理 zh 组、清理 en 组或全部清空       |
| 导出能力   | CSV                                      |
| 删除语义   | 立即逻辑删除，物理清理延迟 7 d 执行      |

**个性化画像与风格偏好**

| 项目     | 内容                                                         |
| -------- | ------------------------------------------------------------ |
| 学习目标 | 支持考试、学术、职场、旅行、日常交流、阅读、写作，多选并可排序 |
| 专业背景 | 支持信息技术、金融、教育、医疗、法律、制造、媒体、艺术、其他，多选并可排序 |
| 年龄层次 | 0–11 岁、12–17 岁、18–24 岁、25–34 岁、35–44 岁、45 岁及以上，仅用于匹配，不对外展示 |
| 当前水平 | 支持 CEFR A1–C2、IELTS 总分与单项分、TOEFL iBT 总分与单项分、CET 分数、自评 1–10 分，用于可读性映射 |
| 语言对   | 用户从语言对白名单选择                                       |
| 风格标签 | 支持语域、体裁、语气、主题，多选并可排序，上限 3 个          |

#### 1.4.3.2 Plus 档

**个性化例句**

| 项目     | 配置                                    |
| -------- | --------------------------------------- |
| 例句条数 | 默认 3 条，可调 1–3 条                  |
| 译文     | 默认显示，en → en 与 zh → zh 不显示译文 |
| 难度切换 | 支持更简单或更难                        |
| 风格切换 | 支持口语、书面、学术、商务              |
| 再生成   | 10 次 / d                               |

**结果页模块**

| 模块               | 默认状态 | 优先级 | 默认条数或长度 | 详略级别 | 自定义能力                                 |
| ------------------ | -------- | ------ | -------------- | -------- | ------------------------------------------ |
| 释义与义项         | 开启     | 1      | 3 个义项       | 中       | 模块开关可调，顺序可调，详略可调           |
| 个性化例句         | 开启     | 2      | 3 条           | 中       | 模块开关可调，顺序可调，详略可调           |
| 常见搭配与固定搭配 | 开启     | 3      | 3 条           | 短       | 模块开关可调，顺序可调，详略可调           |
| 同义词与反义词     | 开启     | 5      | 4 项           | 短       | 模块开关可调，顺序可调，详略可调           |
| 派生与词族         | 开启     | 6      | 2 项           | 短       | 模块开关可调，顺序可调，详略可调           |
| 频率与考试标签     | 开启     | 7      | 徽标展示       | 短       | 模块开关可调，顺序可调，详略可调，暂不实现 |

**历史记录与数据控制**

| 项目       | 配置                                      |
| ---------- | ----------------------------------------- |
| 是否保存   | 默认开启，可关闭或启用无痕查询            |
| 留存策略   | 默认 90 d，上限 1000 条，超限自动滚动清理 |
| 按语言清理 | 可清理 zh 组、清理 en 组或全部清空        |
| 导出能力   | CSV 与 JSON，支持基础过滤                 |
| 删除语义   | 立即逻辑删除，物理清理延迟 7 d 执行       |

**个性化画像与风格偏好**

| 项目     | 内容                                                         |
| -------- | ------------------------------------------------------------ |
| 学习目标 | 支持考试、学术、职场、旅行、日常交流、阅读、写作，多选并可排序 |
| 专业背景 | 支持信息技术、金融、教育、医疗、法律、制造、媒体、艺术、其他，多选并可排序 |
| 年龄层次 | 0–11 岁、12–17 岁、18–24 岁、25–34 岁、35–44 岁、45 岁及以上，仅用于匹配，不对外展示 |
| 当前水平 | 支持 CEFR A1–C2、IELTS 总分与单项分、TOEFL iBT 总分与单项分、CET 分数、自评 1–10 分，用于可读性映射 |
| 语言对   | 用户从语言对白名单选择                                       |
| 风格标签 | 支持语域、体裁、语气、主题，多选并可排序，上限 5 个          |

#### 1.4.3.3 Pro 档

**个性化例句**

| 项目     | 配置                                    |
| -------- | --------------------------------------- |
| 例句条数 | 默认 5 条，可调 1–5 条                  |
| 译文     | 默认显示，en → en 与 zh → zh 不显示译文 |
| 难度切换 | 支持更简单或更难                        |
| 风格切换 | 支持口语、书面、学术、商务              |
| 再生成   | 20 次 / d                               |

**结果页模块**

| 模块               | 默认状态 | 优先级 | 默认条数或长度 | 详略级别 | 自定义能力                                                 |
| ------------------ | -------- | ------ | -------------- | -------- | ---------------------------------------------------------- |
| 释义与义项         | 开启     | 1      | 3 个义项       | 中       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好           |
| 个性化例句         | 开启     | 2      | 5 条           | 中       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好           |
| 常见搭配与固定搭配 | 开启     | 3      | 3 条           | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好           |
| 同义词与反义词     | 开启     | 5      | 4 项           | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好           |
| 派生与词族         | 开启     | 6      | 2 项           | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好           |
| 频率与考试标签     | 开启     | 7      | 徽标展示       | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好，暂不实现 |

**历史记录与数据控制**

| 项目       | 配置                                |
| ---------- | ----------------------------------- |
| 是否保存   | 默认开启，可关闭或启用无痕查询      |
| 留存策略   | 永久保留，用户主动清理前不自动删除  |
| 按语言清理 | 可清理 zh 组、清理 en 组或全部清空  |
| 导出能力   | CSV 与 JSON，支持条件过滤与批量导出 |
| 删除语义   | 立即逻辑删除，物理清理延迟 7 d 执行 |

**个性化画像与风格偏好**

| 项目     | 内容                                                         |
| -------- | ------------------------------------------------------------ |
| 学习目标 | 支持考试、学术、职场、旅行、日常交流、阅读、写作，多选并可排序 |
| 专业背景 | 支持信息技术、金融、教育、医疗、法律、制造、媒体、艺术、其他，多选并可排序 |
| 年龄层次 | 0–11 岁、12–17 岁、18–24 岁、25–34 岁、35–44 岁、45 岁及以上，仅用于匹配，不对外展示 |
| 当前水平 | 支持 CEFR A1–C2、IELTS 总分与单项分、TOEFL iBT 总分与单项分、CET 分数、自评 1–10 分，用于可读性映射 |
| 语言对   | 用户从语言对白名单选择                                       |
| 风格标签 | 支持语域、体裁、语气、主题，多选并可排序，上限 8 个          |

**统一详略级别基线**

| 级别 | 中文字符上限 | 英文字符上限 |
| ---- | ------------ | ------------ |
| 短   | 80 字符      | 120 字符     |
| 中   | 150 字符     | 220 字符     |
| 长   | 220 字符     | 320 字符     |

### 1.4.4 订阅与权益概览

| 能力项             | 普通档         | Plus 档         | Pro 档                     |
| ------------------ | -------------- | --------------- | -------------------------- |
| 每日查词上限       | 30 次 / d      | 100 次 / d      | 500 次 / d                 |
| 每次例句数量       | 1 条固定       | 3 条可调 1–3 条 | 5 条可调 1–5 条            |
| 再生成次数         | 1 次 / d       | 10 次 / d       | 20 次 / d                  |
| 历史留存默认与上限 | 10 d 与 100 条 | 90 d 与 1000 条 | 永久                       |
| 风格标签上限       | 3 个           | 5 个            | 8 个                       |
| 输出模块自定义     | 基础开关       | 高级自定义      | 高级自定义与词条级记忆偏好 |
| 导出能力           | CSV            | CSV 与 JSON     | CSV 与 JSON 条件过滤       |
| 并发与限速         | 基础           | 较宽            | 宽                         |

### 1.4.5 支付与账单

| 项目           | 说明                                       |
| -------------- | ------------------------------------------ |
| 订阅开通与续费 | 支付成功后权限即时生效。                   |
| 到期处理       | 到期后自动降级并同步能力边界。             |
| 账单与收据     | 展示订阅档位、生效时间、到期时间与订单号。 |
| 退款与异常     | 遵循目标平台规则，保持状态与权限幂等同步。 |

### 1.4.6 通用设置

| 设置项   | 取值                     | 默认值   |
| -------- | ------------------------ | -------- |
| 主题     | 浅色、深色、跟随系统     | 跟随系统 |
| 快捷键   | 提供默认方案，允许自定义 | 开启     |
| 界面语言 | zh、en                   | zh       |

### 1.4.7 技术实现最小集

| 模块            | 要求                                                         |
| --------------- | ------------------------------------------------------------ |
| Doubao API 适配 | 提供稳定封装、重试、超时、错误语义化、结构化契约与解析容错。 |
| 缓存与降级      | 对同一用户、同一词条、同一配置提供短时缓存。外部异常时降级为基础释义与模板例句并提示。 |
| 账户与订阅      | 提供注册、登录、第三方登录（微信、Apple、Google）。订阅状态与权限实时同步与对账。 |
| 历史记录        | 提供保存、清理、导出功能，支持按语言清理与全部清空。         |

## 1.5 文档约定

| 项目       | 规范                                                         |
| ---------- | ------------------------------------------------------------ |
| 需求编号   | 功能性需求使用前缀 FR 编号，非功能性需求使用前缀 NFR 编号，用例使用前缀 UC 编号，接口使用前缀 API 编号。 |
| 优先级     | 使用 Must、Should、Could、Will not 四级。                    |
| 时间与度量 | 响应时间使用 ms 或 s，容量使用 KB 或 MB，百分比保留 2 位小数。时间使用 UTC 存储，前端按本地时区渲染。 |

## 1.6 成功标准与关键指标

| 类别       | 指标                 | 目标              |
| ---------- | -------------------- | ----------------- |
| 性能       | 首屏查词端到端 P95   | ≤ 2.5 s           |
| 性能       | 首屏查词平均值       | ≤ 1.2 s           |
| 质量       | 结构化输出正确率     | ≥ 99%             |
| 质量       | 例句可理解度正反馈   | ≥ 80%             |
| 账号与订阅 | 登录成功率           | ≥ 99%             |
| 账号与订阅 | 订阅开通与续费成功率 | ≥ 98%             |
| 数据控制   | 清理与导出完成时间   | ≤ 5 s，并提供回执 |
| 数据控制   | 无痕查询留存         | 0 条              |

## 1.7 项目边界与基本假设

| 条目       | 内容                                                 |
| ---------- | ---------------------------------------------------- |
| 外部能力   | 仅对接 Doubao API，用于生成与理解。                  |
| 模型策略   | 不进行基础模型训练或微调。                           |
| 登录与支付 | 支持微信、Apple、Google 登录。支付遵循目标平台规则。 |
| 客户端形态 | 首期重点为 Web 与 H5。                               |
| 数据原则   | 数据采集最小化，用户可撤回同意，系统不提供收藏功能。 |

## 1.8 风险与依赖概览

| 风险或依赖           | 说明                                | 缓解措施                                     |
| -------------------- | ----------------------------------- | -------------------------------------------- |
| 外部接口限流或不可用 | Doubao API 或第三方登录、支付波动。 | 设置重试、超时、熔断、降级机制。             |
| 输入不合规           | 用户输入整句导致失败。              | 前端强校验并提示改为词或词组。               |
| 解析失败             | 结构化契约不满足影响渲染。          | 强化模板解析与兜底输出。                     |
| 订阅状态不同步       | 权限与配额更新不及时。              | 采用幂等更新、回调对账、轮询兜底。           |
| 历史清理误操作       | 用户错误清空数据。                  | 提示二次确认，延迟物理清理并设置可恢复窗口。 |

## 1.9 合规与隐私概览

| 条目               | 要求                                                       |
| ------------------ | ---------------------------------------------------------- |
| 使用条款与隐私政策 | 内置完整文本。首次登录展示同意提示，设置中提供撤回入口。   |
| 数据主体权利       | 用户可导出或删除数据，可关闭历史留存并设定清理周期。       |
| 数据留存           | 用户可定义留存时长与上限，支持按语言清理与全部清空。       |
| 安全基线           | 传输与存储加密，采用最小权限访问控制，对敏感数据脱敏存储。 |

# **附录 A 术语表**

> 用于本需求文档全篇的统一名词与度量口径。缩写一律同时给出中文全称与英文全称。所有时间存储口径为 UTC，展示按用户本地时区。

| **术语**                | **中文全称（英文）**                                         | **定义**                             | **计量或取值**   | **默认口径与规则**                                  | **备注或示例**           |
| ----------------------- | ------------------------------------------------------------ | ------------------------------------ | ---------------- | --------------------------------------------------- | ------------------------ |
| 词条                    | —                                                            | 用户查询的目标文本                   | 字符串           | 去首尾空白，内部统一小写存储，保留原样展示          | 如 “bank account”        |
| 语言对                  | —                                                            | 源语言与目标语言的有序对             | 见白名单         | 以 ISO 语言代码表示                                 | 例如 zh → en             |
| 语言对白名单            | —                                                            | MVP 阶段允许的语言对集合             | {L1…L4}          | L1: zh→en，L2: en→zh，L3: en→en，L4: zh→zh          | 非白名单拒绝并提示       |
| 同语模式                | —                                                            | 源语言与目标语言相同的模式           | 布尔             | en→en、zh→zh 视为同语模式                           | 同语模式默认不显示译文   |
| 译文                    | —                                                            | 与释义对应的目标语言文本             | 字符串           | 同语模式默认不展示，可由用户临时开启                | —                        |
| 释义与义项              | —                                                            | 针对词条的语义条目集合               | 列表             | 相关性排序                                          | 默认展示 3 个义项        |
| 个性化例句              | —                                                            | 结合用户画像生成的例句               | 列表             | 可调条数依订阅档位                                  | 支持难度与风格切换       |
| 常见搭配                | —                                                            | 高频搭配短语                         | 列表             | 相关性排序                                          | 默认 3 条                |
| 固定搭配                | —                                                            | 固定短语/习语                        | 列表             | 相关性排序                                          | 默认 3 条                |
| 同义词/反义词           | —                                                            | 语义相近/相反词                      | 列表             | 去重、相关性排序                                    | 默认 4 项                |
| 派生与词族              | —                                                            | 同词根/派生形态集合                  | 列表             | 去重、相关性排序                                    | 默认 2 项                |
| 详略级别                | —                                                            | 输出内容的长度预算                   | 短/中/长         | 中文上限 80/150/220 字符；英文上限 120/220/320 字符 | 若超限进行裁剪           |
| 模块优先级              | —                                                            | 结果页模块的渲染顺序                 | 整数             | 数字越小优先级越高                                  | 1 表示最高优先级         |
| 日                      | 自然日（Day）                                                | 配额与计数的时间粒度                 | d                | 重置时间按用户本地时区 00:00；服务端存储 UTC        | 与计费无关               |
| 再生成                  | —                                                            | 在同一词条与同一配置下发起的二次生成 | 次/日            | 独立于“查词”计数，跨端共享                          | 受订阅档位限制           |
| 查词上限                | —                                                            | 每个自然日允许的查询次数             | 次/d             | 用户维度计数，跨端共享；重试不计入                  | 超限返回 429             |
| 历史留存                | —                                                            | 系统保存的查询与结果记录             | 条/天/时长       | 留存时长与条数受档位约束                            | 支持按语言清理           |
| 无痕查询                | —                                                            | 不在本地与后端持久化历史             | 布尔             | 关闭后仍会计入实时配额与限流                        | 仅保留会话内渲染态       |
| 逻辑删除                | —                                                            | 将记录标记为删除但未物理移除         | 布尔标记         | 即时生效                                            | 与物理清理解耦           |
| 物理清理                | —                                                            | 实际删除数据                         | 定时任务         | 默认延迟 7 d 执行                                   | 可设置可恢复窗口         |
| 账户体系                | —                                                            | 用户身份与授权管理                   | —                | 支持邮箱与第三方登录                                | —                        |
| 第三方登录              | —                                                            | 通过外部身份提供方登录               | OAuth            | 支持微信、Apple、Google                             | 平台合规要求适用         |
| 订阅档位                | —                                                            | 普通/Plus/Pro 三档能力集合           | 档               | 档位与权益矩阵为单一事实源                          | 到期自动降级             |
| 并发与限速              | —                                                            | 系统的速率限制与突发控制             | QPS/突发         | 用户级、租户级、全局三级限流                        | 见“限流与配额”条款       |
| 配额                    | —                                                            | 在一定周期内可用的次数或资源         | 次/日            | 与限速正交，按用户计                                | 查词、再生成为两类配额   |
| 幂等（Idempotency）     | —                                                            | 同一请求多次执行仅一次生效           | 键               | 幂等键=hash(user_id+entry+config)                   | 用于重试与回放           |
| 熔断（Circuit Breaker） | —                                                            | 依赖异常时中断调用并快速失败         | 阈值             | 依赖 5xx≥5% 且持续 1 分钟触发                       | 恢复需半开探测通过       |
| 降级（Degradation）     | —                                                            | 退化到低成本或低依赖形态             | 策略             | 回退到基础释义与模板例句                            | UI 显示退化提示          |
| 缓存命中                | —                                                            | 请求命中缓存而非实时生成             | 比例             | 记录命中率                                          | L1/L2 两级缓存           |
| L1/L2 缓存              | 一级/二级缓存（Level 1/2 Cache）                             | L1 为用户级短期缓存，L2 为共享缓存   | TTL              | L1 默认 10 分钟，L2 默认 30 分钟                    | key=user_id+entry+config |
| 结构化契约              | 数据契约（Schema Contract）                                  | 前后端/服务与模型的字段契约          | 版本号           | 采用语义化版本：glancy.dict.v1                      | 不兼容变更需弃用期       |
| 契约回放样本            | —                                                            | 用于回归验证的历史样本集             | 条               | 每次发布≥500 条                                     | 通过 CI 校验             |
| 画像                    | 用户画像（User Profile）                                     | 学习目标、专业背景、水平、风格等     | 对象             | 用于生成控制与排序                                  | 本地缓存+后端存储        |
| 风格标签                | —                                                            | 语域、体裁、语气、主题等标签         | 列表             | 档位限定最大可选数                                  | 参与例句生成             |
| CEFR                    | 欧洲语言共同参考框架（Common European Framework of Reference） | 语言能力等级                         | A1–C2            | 用于可读性映射                                      | —                        |
| IELTS                   | 国际英语语言测试系统（International English Language Testing System） | 英语考试评分                         | 0–9 分，含单项   | 由用户填写                                          | —                        |
| TOEFL iBT               | 托福网考（Test of English as a Foreign Language, Internet-based Test） | 英语考试评分                         | 0–120 分，含单项 | 由用户填写                                          | —                        |
| CET                     | 大学英语考试（College English Test）                         | 英语考试评分                         | CET-4/CET-6 分数 | 由用户填写                                          | —                        |
| P95/P99                 | 第 95/99 百分位延迟（Percentile Latency）                    | 端到端首屏渲染用时分位值             | 秒               | 从用户触发到首屏渲染完成                            | 采样窗口 5 分钟          |
| SLI                     | 服务等级指标（Service Level Indicator）                      | 可观测的服务度量                     | 比例/时间        | 如错误率、延迟、可用性                              | —                        |
| SLO                     | 服务等级目标（Service Level Objective）                      | 对 SLI 的目标阈值                    | 百分比/时间      | 如月度可用性 99.9%                                  | —                        |
| SLA                     | 服务等级协议（Service Level Agreement）                      | 面向用户的服务承诺                   | 条款             | 与赔付或免责相关                                    | 与 SLO 区分              |
| LID                     | 语言识别（Language Identification）                          | 判定输入语言的过程                   | 置信度 p         | p≥0.8 通过；0.6–0.8 需确认                          | 低于 0.6 拒绝            |
| QPS                     | 每秒请求数（Queries Per Second）                             | 吞吐度量                             | 次/秒            | 限流基准单位                                        | 支持突发桶               |
| TTL                     | 存活时间（Time To Live）                                     | 缓存/链接有效期                      | 时间             | 下载链接默认 10 分钟                                | 到期自动失效             |
| RBAC                    | 基于角色的访问控制（Role-Based Access Control）              | 权限管理模型                         | —                | 最小权限原则                                        | 后台与导出必须           |
| CSV                     | 逗号分隔值（Comma-Separated Values）                         | 导出格式                             | 文件             | UTF-8、带表头                                       | 字段脱敏                 |
| JSON                    | JavaScript 对象表示法（JavaScript Object Notation）          | 导出/接口格式                        | 文件/消息        | UTF-8、驼峰字段                                     | 契约版本化               |
| SDK                     | 软件开发工具包（Software Development Kit）                   | 第三方集成组件                       | —                | 列入子处理者清单                                    | 合规审计                 |
| DPA                     | 数据处理协议（Data Processing Addendum）                     | 与第三方的数据合规协议               | 文档             | 必须签署并归档                                      | —                        |
| SCC                     | 标准合同条款（Standard Contractual Clauses）                 | 跨境数据的标准条款                   | 文档             | 适用跨境路径                                        | —                        |
| UTC                     | 协调世界时（Coordinated Universal Time）                     | 统一存储时间标准                     | 时间             | 后端统一存储                                        | 前端本地渲染             |
| trace_id                | 跟踪标识（Trace Identifier）                                 | 贯穿调用链的唯一 ID                  | 字符串           | 每请求生成                                          | 便于排障与对账           |
| tokens_in/out           | 输入/输出 Token 数                                           | 大模型计量单位                       | 整数             | 记入成本统计                                        | 含重试分摊               |
| 错误率                  | —                                                            | 失败请求占比                         | 百分比           | 定义 4xx/5xx 分类口径                               | 超阈值触发告警           |
| 告警                    | —                                                            | SLI/SLO 越界的通知                   | 规则             | 阈值、抑制、升级策略                                | 短信/邮件/IM             |
| 导出回执                | —                                                            | 导出任务的完成确认                   | ID/时间          | ≤5 s 返回下载链接与回执号                           | 链接一次性、限时         |
| 订阅对账                | —                                                            | 与支付平台的状态一致性核对           | 轮询/回调        | 回调优先，轮询兜底                                  | 幂等更新                 |
| 状态机                  | —                                                            | 订阅状态的有向图                     | 有限集           | Active/Grace/Expired 等                             | 明确定义迁移条件         |
| 单一事实源              | —                                                            | 唯一权威的数据或定义来源             | —                | 订阅矩阵作为 SSoT                                   | 其他处引用而非复制       |
| 敏感词拦截              | —                                                            | 基于策略的输入过滤                   | 列表/规则        | 触发即拒绝并审计                                    | 不落库原文               |
| 审计日志                | —                                                            | 合规相关操作记录                     | 事件流           | 不可篡改、定期归档                                  | 保留期与访问控制         |



## **附：计量与阈值统一表**

- 自然日重置：用户本地时区 00:00；服务端按 UTC 存储，显示按本地时区渲染。
- 限流口径：先用户级，再租户级，最后全局级；返回码 429，返回剩余冷却时间。
- 延迟统计：端到端口径，采样窗口 5 分钟，滚动聚合；同时分解前端、后端、第三方分段延迟。
- 数据导出：CSV/JSON 脱敏，下载链接一次性，TTL 10 分钟；超时需重新申请。
- 删除语义：逻辑删除即时可见；物理清理默认 7 天后执行；恢复窗口在清理前有效。
- 合规域：数据处理所在地、跨境路径、第三方与子处理者清单在合规清单中维护，作为单一事实源引用。