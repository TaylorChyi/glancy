# 缺陷报告模板与处理流程

## 报告模板
- **标题**：
- **测试/运行环境**：
  - 操作系统 / 浏览器 / 客户端版本
  - 服务版本 / 构建号
- **缺陷来源**：提单角色或渠道（测试/监控/客户等）
- **重现步骤**：逐步描述触发场景，必要时附数据、接口、脚本
- **预期结果**：
- **实际结果**：
- **截图 / 日志链接**：若涉及敏感数据请脱敏
- **严重度 (Severity)**：见下表
- **优先级 (Priority)**：见下表
- **归属团队 / 责任人**：产品线、模块、负责人
- **影响面评估**：受影响用户、业务、指标
- **当前状态**：新建 / 确认 / 修复 / 验证 / 关闭 / 回退
- **修复版本计划**：目标发版编号或回滚方案
- **关联变更 / 发布单 / 告警编号**：与发布与回滚流程保持一致
- **备注**：临时措施、风险提示

## 严重度与优先级定义

| 严重度 | 描述 | 示例 | 告警与响应策略 |
| --- | --- | --- | --- |
| S0 | 平台级不可用或数据灾难，核心业务中断，无法通过回退自动恢复 | 全站登录/支付不可用，核心数据丢失 | 自动触发最高级告警，5 分钟内通知值班并启动应急与回滚流程 |
| S1 | 关键路径功能严重受阻，存在规避手段但影响大范围用户 | 下单成功率大幅下降、核心接口大量报错 | 高优先级告警，15 分钟内确认，1 小时内给出处置方案 |
| S2 | 非核心功能异常或核心功能偶发问题，对有限用户造成影响 | 某模块数据展示错误、定时任务延迟 | 常规告警，2 小时内响应，24 小时内给出修复计划 |
| S3 | 低风险缺陷，对业务影响有限，可接受绕过 | UI 细节、文案错误 | 日报级监控，无需即时告警，计划版本内修复 |

| 优先级 | 描述 | 响应时限 |
| --- | --- | --- |
| P0 | 立即处理，必须第一时间修复或回退 | 5 分钟内介入，遵循应急发布/回滚规范 |
| P1 | 高优先，需在最近版本排期 | 4 小时内确认责任人，1 个工作日内给出修复方案 |
| P2 | 中优先，结合迭代节奏安排 | 2 个工作日内纳入迭代计划 |
| P3 | 低优先，观察后择机处理 | 评审后决定是否纳入后续版本 |

> 严重度用于衡量影响程度，优先级用于指派修复顺序。严重度与优先级通常相关，但可根据业务评估独立调整。

## 缺陷处理流程与状态机

1. **新建 (New)**：缺陷录入平台，自动关联最新发布单。若严重度 ≥ S1 自动触发告警与应急响应。
2. **确认 (Triaged)**：责任团队评估严重度/优先级，补充信息，决定是否立即回退或进入修复。需要与发布与回滚流程保持同步，确认是否触发回滚。
3. **修复 (In Progress)**：开发进行修复、补丁或回滚操作。若涉及线上回滚需同步记录回滚单号。
4. **验证 (QA Verify)**：修复方案部署到验证环境或线上灰度，由提单人/QA 验证。若失败可回退到“修复”或“确认”。
5. **关闭 (Closed)**：验证通过，修复版本上线并在发布记录中归档。
6. **回退 (Reopen/Rolled Back)**：若验证失败或线上问题反复出现，进入回退状态，执行回滚流程并重新进入“修复”或“确认”。

流程状态机：
```
新建 -> 确认 -> 修复 -> 验证 -> 关闭
                  ↑       ↓
                回退 <----
```

- 每个状态变化需更新责任人、时间戳、以及与发布/回滚单的关联信息。
- 严重度映射至告警策略，确保 S0/S1 缺陷进入发布回滚流程并触发实时告警；S2/S3 缺陷进入常规排期或观察队列。
- 定期复盘高严重度缺陷，追踪修复版本和预防措施。
