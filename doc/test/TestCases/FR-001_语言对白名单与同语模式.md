# FR-001 语言对白名单与同语模式（Must）

- **前置**
  - Web 端登录 Plus 用户，默认语言对设为 `en→zh`，具备 `POST /api/v1/lookup` 访问令牌。
  - 预置测试词条 `run`（白名单）与 `hola`（非白名单语言对示例）。
  - 浏览器 DevTools 打开 network 面板以观察阻止提示与请求体。
- **步骤**
  1. 在 UI 将语言对切换为 `es→en`（不在 L1–L4）并输入 `hola`，尝试提交查询。
  2. 直接调用 `POST /api/v1/lookup`，`langPair=es→en`、`entry=hola`，观察响应。
  3. 在 UI 切换到 `en→en` 并输入 `run`，发起查询并展开释义模块。
- **期望**
  - 步骤 1：提交按钮变为禁用并提示“仅支持 zh↔en / en→en / zh→zh”，请求未发送。
  - 步骤 2：后端返回 400，`code=ENTRY_NOT_SUPPORTED_LANG_PAIR`，`error.hint` 列出白名单语言对。
  - 步骤 3：查询成功但释义模块不展示 translation 字段，UI 无“临时展开译文”入口；响应包含 `langPair=en→en` 且 schema 完整。
- **数据**
  - 接口：`POST /api/v1/lookup`（Header 含 `Authorization`、`X-Client-Lang`）。
  - 负样例语言对：`es→en`；正样例语言对：`en→en`、`en→zh`。
  - 观测字段：`modules.definitions[*].translation`、`error.code`、前端 toast 文案。
- **优先级**：P0（Must）
- **关联 UC**：UC-01，UC-12
- **关联 AC**：AC-FR-001，AC-UC-01，AC-UC-12
