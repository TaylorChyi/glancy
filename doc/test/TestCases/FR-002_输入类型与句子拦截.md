# FR-002 输入类型与句子拦截（Must）

- **前置**
  - Web 端登录 Free 用户，启用默认语言对 `en→zh`，输入框支持实时校验。
  - 准备句子样本 `"I hope this helps."` 与合规词条 `"synergy"`。
  - Charles/Mock 服务可用于监控被阻止时是否仍发起请求。
- **步骤**
  1. 在 UI 输入句子样本，观察前端校验提示并尝试点击“查询”。
  2. 继续输入合规词条 `synergy`，确认可以正常查询。
  3. 使用 API 直接调用 `POST /api/v1/lookup`，payload 中 `entry="I hope this helps."`，记录响应。
- **期望**
  - 步骤 1：UI 即时提示“请改为词或词组”，按钮禁用，原输入保留供编辑。
  - 步骤 2：查询被接受并返回正常结果，证明拦截仅对句子生效。
  - 步骤 3：服务端返回 400，`code=ENTRY_NOT_WORD_OR_PHRASE`，`error.hint` 给出改写指引。
- **数据**
  - API：`POST /api/v1/lookup`，Headers 含 `Authorization`、`X-Client-Mode=incognito`（模拟无痕）。
  - 句子检测信号：长度 > 15、包含 `.`、LLM 评分 < 0.2。需在日志中确认 `validation.rule=sentence_block`。
- **优先级**：P0（Must）
- **关联 UC**：UC-01，UC-11
- **关联 AC**：AC-FR-002，AC-UC-01，AC-UC-11
