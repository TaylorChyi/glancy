# FR-013 模块开关、顺序与详略自定义（Must）

- **前置**
  - Free、Plus、Pro 三类账号；各自在浏览器 A/B 中登录以验证跨端同步。
  - 记录默认模块顺序与详略级别映射表。
  - 准备词条 `sustainable`。
- **步骤**
  1. Free 账号尝试拖拽调整模块顺序或切换详略，观察 UI 行为。
  2. Plus 账号在浏览器 A 中关闭“派生词”模块并调整顺序，将“例句”拖到“搭配”之前，详略设为“简”。
  3. 在浏览器 B 刷新同一 Plus 账号页面，确认设置实时同步。
  4. Pro 账号对词条 `sustainable` 设置词条级偏好（例句详略=详，搭配开启），再次查询该词，确认偏好仅对该词生效。
- **期望**
  - Free 账号仅能切换开关，排序/详略入口置灰并提示升级。
  - Plus 账号的排序与详略调整即时生效并在 2 秒内同步到另一个端；模块拖拽后查询结果按新顺序渲染。
  - Pro 账号保存的词条级偏好写入画像（`profile_etag` 变化），后续查询该词自动应用，其他词保持全局设置。
- **数据**
  - API：`PATCH /api/v1/settings/modules`，`PATCH /api/v1/profile/entries/{entry}`。
  - 事件：`settings.modules.updated`，包含 `tier`、`scope=global|entry`。
  - 词条：`sustainable`。
- **优先级**：P0（Must）
- **关联 UC**：UC-07
- **关联 AC**：AC-FR-013，AC-UC-07
