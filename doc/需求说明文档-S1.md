# 第 1 章 引言

## 1.1 文档目的

本章明确 Glancy 个性化电子词典在 MVP 阶段的目标、实现范围、关键约束与成功标准。文本作为产品、设计、研发、测试、运营与法务的统一依据，确保需求明确、可落地、可验收与可追溯。

## 1.2 项目概述与愿景

| 主题     | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| 项目概述 | Glancy 是个性化电子词典。系统接入 Doubao API，通过提示词模板与用户画像生成贴合学习目标与近期查词历史的释义与例句。系统输出以理解效率为核心目标。 |
| 核心价值 | 提升可理解度与相关性，提供直接的输出结构，降低使用门槛与配置成本。 |
| 产品愿景 | 实现“查询即理解”，为后续记忆与复习能力预留数据与接口基础。   |

## 1.3 读者对象与阅读建议

| 读者角色     | 关注重点                                                     |
| ------------ | ------------------------------------------------------------ |
| 产品与交互   | 实现范围、输出结构、分层能力                                 |
| 前端与 H5 端 | 输入校验、模块渲染、设置项、语言切换                         |
| 后端与平台   | 账户体系、订阅、配额、历史记录、数据控制、第三方登录与支付对接 |
| 提示词工程   | 语言对白名单、例句生成控制、风格控制、难度控制               |
| 测试与验收   | 输入限制、分层配额、清理规则、导出能力                       |
| 法务与合规   | 使用条款、隐私政策、数据主体权利、留存与清理策略             |

## 1.4 实现范围

本节仅呈现 MVP 阶段的实现内容。输入仅接受单词或词组，若用户输入整句，系统提示改为词或词组。

### 1.4.1 语言对白名单

| 序号 | 语言对  | 模式说明                |
| ---- | ------- | ----------------------- |
| L1   | zh → en | zh 到 en 翻译           |
| L2   | en → zh | en 到 zh 翻译           |
| L3   | en → en | en 到 en 同语释义与例句 |
| L4   | zh → zh | zh 到 zh 同语释义与例句 |

同语模式不显示译文。

### 1.4.2 输入与查词规则

| 项目     | 规定                                                         |
| -------- | ------------------------------------------------------------ |
| 输入类型 | 仅接受单词或词组                                             |
| 句子输入 | 不接受，提示用户改为词或词组                                 |
| 上下文   | 支持简短词组输入以提升相关性                                 |
| 输出范围 | 词典具备的模块全部可输出，默认全部开启。用户可在设置中调整模块开关、顺序与详略级别 |
| 释义呈现 | 展示多义项并按相关性排序，不提供原因说明                     |
| 译文显示 | 默认显示译文，en → en 与 zh → zh 模式不显示译文              |

### 1.4.3 分层功能说明

再生成次数为全局日配额，用尽后次日恢复。

#### 1.4.3.1 普通档

**个性化例句**

| 项目     | 配置                                    |
| -------- | --------------------------------------- |
| 例句条数 | 默认 1 条，不可调                       |
| 译文     | 默认显示，en → en 与 zh → zh 不显示译文 |
| 难度切换 | 支持更简单或更难                        |
| 风格切换 | 支持口语、书面、学术、商务              |
| 再生成   | 1 次 / d                                |

**结果页模块**

| 模块               | 默认状态 | 优先级 | 默认条数或长度 | 详略级别 | 说明               |
| ------------------ | -------- | ------ | -------------- | -------- | ------------------ |
| 释义与义项         | 开启     | 1      | 3 个义项       | 中       | 按相关性排序       |
| 个性化例句         | 开启     | 2      | 1 条           | 中       | 支持难度与风格切换 |
| 常见搭配与固定搭配 | 开启     | 3      | 3 条           | 短       | 可展开更多         |
| 同义词与反义词     | 开启     | 5      | 4 项           | 短       | 词汇拓展           |
| 派生与词族         | 开启     | 6      | 2 项           | 短       | 展示形态关联       |

**历史记录与数据控制**

| 项目       | 配置                                     |
| ---------- | ---------------------------------------- |
| 是否保存   | 默认开启，可关闭或启用无痕查询           |
| 留存策略   | 默认 10 d，上限 100 条，超限自动滚动清理 |
| 按语言清理 | 可清理 zh 组、清理 en 组或全部清空       |
| 导出能力   | CSV                                      |
| 删除语义   | 立即逻辑删除，物理清理延迟 7 d 执行      |

**个性化画像与风格偏好**

| 项目     | 内容                                                         |
| -------- | ------------------------------------------------------------ |
| 学习目标 | 支持考试、学术、职场、旅行、日常交流、阅读、写作，多选并可排序 |
| 专业背景 | 支持信息技术、金融、教育、医疗、法律、制造、媒体、艺术、其他，多选并可排序 |
| 年龄层次 | 0–11 岁、12–17 岁、18–24 岁、25–34 岁、35–44 岁、45 岁及以上，仅用于匹配，不对外展示 |
| 当前水平 | 支持 CEFR A1–C2、IELTS 总分与单项分、TOEFL iBT 总分与单项分、CET 分数、自评 1–10 分，用于可读性映射 |
| 语言对   | 用户从语言对白名单选择                                       |
| 风格标签 | 支持语域、体裁、语气、主题，多选并可排序，上限 3 个          |

#### 1.4.3.2 Plus 档

**个性化例句**

| 项目     | 配置                                    |
| -------- | --------------------------------------- |
| 例句条数 | 默认 3 条，可调 1–3 条                  |
| 译文     | 默认显示，en → en 与 zh → zh 不显示译文 |
| 难度切换 | 支持更简单或更难                        |
| 风格切换 | 支持口语、书面、学术、商务              |
| 再生成   | 10 次 / d                               |

**结果页模块**

| 模块               | 默认状态 | 优先级 | 默认条数或长度 | 详略级别 | 自定义能力                       |
| ------------------ | -------- | ------ | -------------- | -------- | -------------------------------- |
| 释义与义项         | 开启     | 1      | 3 个义项       | 中       | 模块开关可调，顺序可调，详略可调 |
| 个性化例句         | 开启     | 2      | 3 条           | 中       | 模块开关可调，顺序可调，详略可调 |
| 常见搭配与固定搭配 | 开启     | 3      | 3 条           | 短       | 模块开关可调，顺序可调，详略可调 |
| 同义词与反义词     | 开启     | 5      | 4 项           | 短       | 模块开关可调，顺序可调，详略可调 |
| 派生与词族         | 开启     | 6      | 2 项           | 短       | 模块开关可调，顺序可调，详略可调 |

**历史记录与数据控制**

| 项目       | 配置                                      |
| ---------- | ----------------------------------------- |
| 是否保存   | 默认开启，可关闭或启用无痕查询            |
| 留存策略   | 默认 90 d，上限 1000 条，超限自动滚动清理 |
| 按语言清理 | 可清理 zh 组、清理 en 组或全部清空        |
| 导出能力   | CSV 与 JSON，支持基础过滤                 |
| 删除语义   | 立即逻辑删除，物理清理延迟 7 d 执行       |

**个性化画像与风格偏好**

| 项目     | 内容                                                         |
| -------- | ------------------------------------------------------------ |
| 学习目标 | 支持考试、学术、职场、旅行、日常交流、阅读、写作，多选并可排序 |
| 专业背景 | 支持信息技术、金融、教育、医疗、法律、制造、媒体、艺术、其他，多选并可排序 |
| 年龄层次 | 0–11 岁、12–17 岁、18–24 岁、25–34 岁、35–44 岁、45 岁及以上，仅用于匹配，不对外展示 |
| 当前水平 | 支持 CEFR A1–C2、IELTS 总分与单项分、TOEFL iBT 总分与单项分、CET 分数、自评 1–10 分，用于可读性映射 |
| 语言对   | 用户从语言对白名单选择                                       |
| 风格标签 | 支持语域、体裁、语气、主题，多选并可排序，上限 5 个          |

#### 1.4.3.3 Pro 档

**个性化例句**

| 项目     | 配置                                    |
| -------- | --------------------------------------- |
| 例句条数 | 默认 5 条，可调 1–5 条                  |
| 译文     | 默认显示，en → en 与 zh → zh 不显示译文 |
| 难度切换 | 支持更简单或更难                        |
| 风格切换 | 支持口语、书面、学术、商务              |
| 再生成   | 20 次 / d                               |

**结果页模块**

| 模块               | 默认状态 | 优先级 | 默认条数或长度 | 详略级别 | 自定义能力                                       |
| ------------------ | -------- | ------ | -------------- | -------- | ------------------------------------------------ |
| 释义与义项         | 开启     | 1      | 3 个义项       | 中       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好 |
| 个性化例句         | 开启     | 2      | 5 条           | 中       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好 |
| 常见搭配与固定搭配 | 开启     | 3      | 3 条           | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好 |
| 同义词与反义词     | 开启     | 5      | 4 项           | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好 |
| 派生与词族         | 开启     | 6      | 2 项           | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好 |

**历史记录与数据控制**

| 项目       | 配置                                |
| ---------- | ----------------------------------- |
| 是否保存   | 默认开启，可关闭或启用无痕查询      |
| 留存策略   | 永久保留，用户主动清理前不自动删除  |
| 按语言清理 | 可清理 zh 组、清理 en 组或全部清空  |
| 导出能力   | CSV 与 JSON，支持条件过滤与批量导出 |
| 删除语义   | 立即逻辑删除，物理清理延迟 7 d 执行 |

**个性化画像与风格偏好**

| 项目     | 内容                                                         |
| -------- | ------------------------------------------------------------ |
| 学习目标 | 支持考试、学术、职场、旅行、日常交流、阅读、写作，多选并可排序 |
| 专业背景 | 支持信息技术、金融、教育、医疗、法律、制造、媒体、艺术、其他，多选并可排序 |
| 年龄层次 | 0–11 岁、12–17 岁、18–24 岁、25–34 岁、35–44 岁、45 岁及以上，仅用于匹配，不对外展示 |
| 当前水平 | 支持 CEFR A1–C2、IELTS 总分与单项分、TOEFL iBT 总分与单项分、CET 分数、自评 1–10 分，用于可读性映射 |
| 语言对   | 用户从语言对白名单选择                                       |
| 风格标签 | 支持语域、体裁、语气、主题，多选并可排序，上限 8 个          |

**统一详略级别基线**

| 级别 | 中文字符上限 | 英文字符上限 |
| ---- | ------------ | ------------ |
| 短   | 80 字符      | 120 字符     |
| 中   | 150 字符     | 220 字符     |
| 长   | 220 字符     | 320 字符     |

### 1.4.4 订阅与权益概览

| 能力项             | 普通档         | Plus 档         | Pro 档                     |
| ------------------ | -------------- | --------------- | -------------------------- |
| 每日查词上限       | 30 次 / d      | 100 次 / d      | 500 次 / d                 |
| 每次例句数量       | 1 条固定       | 3 条可调 1–3 条 | 5 条可调 1–5 条            |
| 再生成次数         | 1 次 / d       | 10 次 / d       | 20 次 / d                  |
| 历史留存默认与上限 | 10 d 与 100 条 | 90 d 与 1000 条 | 永久                       |
| 风格标签上限       | 3 个           | 5 个            | 8 个                       |
| 输出模块自定义     | 基础开关       | 高级自定义      | 高级自定义与词条级记忆偏好 |
| 导出能力           | CSV            | CSV 与 JSON     | CSV 与 JSON 条件过滤       |
| 并发与限速         | 基础           | 较宽            | 宽                         |

### 1.4.5 支付与账单

| 项目           | 说明                                       |
| -------------- | ------------------------------------------ |
| 订阅开通与续费 | 支付成功后权限即时生效。                   |
| 到期处理       | 到期后自动降级并同步能力边界。             |
| 账单与收据     | 展示订阅档位、生效时间、到期时间与订单号。 |
| 退款与异常     | 遵循目标平台规则，保持状态与权限幂等同步。 |

### 1.4.6 通用设置

| 设置项   | 取值                     | 默认值   |
| -------- | ------------------------ | -------- |
| 主题     | 浅色、深色、跟随系统     | 跟随系统 |
| 快捷键   | 提供默认方案，允许自定义 | 开启     |
| 界面语言 | zh、en                   | zh       |

### 1.4.7 技术实现最小集

| 模块            | 要求                                                         |
| --------------- | ------------------------------------------------------------ |
| Doubao API 适配 | 提供稳定封装、重试、超时、错误语义化、结构化契约与解析容错。 |
| 缓存与降级      | 对同一用户、同一词条、同一配置提供短时缓存。外部异常时降级为基础释义与模板例句并提示。 |
| 账户与订阅      | 提供注册、登录、第三方登录（微信、Apple、Google）。订阅状态与权限实时同步与对账。 |
| 历史记录        | 提供保存、清理、导出功能，支持按语言清理与全部清空。         |

## 1.5 文档约定

| 项目       | 规范                                                         |
| ---------- | ------------------------------------------------------------ |
| 需求编号   | 功能性需求使用前缀 FR 编号，非功能性需求使用前缀 NFR 编号，用例使用前缀 UC 编号，接口使用前缀 API 编号。 |
| 优先级     | 使用 Must、Should、Could、Will not 四级。                    |
| 时间与度量 | 响应时间使用 ms 或 s，容量使用 KB 或 MB，百分比保留 2 位小数。时间使用 UTC 存储，前端按本地时区渲染。 |

## 1.6 成功标准与关键指标

| 类别       | 指标                 | 目标              |
| ---------- | -------------------- | ----------------- |
| 性能       | 首屏查词端到端 P95   | ≤ 2.5 s           |
| 性能       | 首屏查词平均值       | ≤ 1.2 s           |
| 质量       | 结构化输出正确率     | ≥ 99%             |
| 质量       | 例句可理解度正反馈   | ≥ 80%             |
| 账号与订阅 | 登录成功率           | ≥ 99%             |
| 账号与订阅 | 订阅开通与续费成功率 | ≥ 98%             |
| 数据控制   | 清理与导出完成时间   | ≤ 5 s，并提供回执 |
| 数据控制   | 无痕查询留存         | 0 条              |

## 1.7 项目边界与基本假设

# 第 1 章 引言

## 1.1 文档目的

本章明确 Glancy 个性化电子词典在 MVP 阶段的目标、实现范围、关键约束与成功标准。文本作为产品、设计、研发、测试、运营与法务的统一依据，确保需求明确、可落地、可验收与可追溯。

## 1.2 项目概述与愿景

| 主题     | 说明                                                         |
| -------- | ------------------------------------------------------------ |
| 项目概述 | Glancy 是个性化电子词典。系统接入 Doubao API，通过提示词模板与用户画像生成贴合学习目标与近期查词历史的释义与例句。系统输出以理解效率为核心目标。 |
| 核心价值 | 提升可理解度与相关性，提供直接的输出结构，降低使用门槛与配置成本。 |
| 产品愿景 | 实现“查询即理解”，为后续记忆与复习能力预留数据与接口基础。   |

## 1.3 读者对象与阅读建议

| 读者角色     | 关注重点                                                     |
| ------------ | ------------------------------------------------------------ |
| 产品与交互   | 实现范围、输出结构、分层能力                                 |
| 前端与移动端 | 输入校验、模块渲染、设置项、语言切换                         |
| 后端与平台   | 账户体系、订阅、配额、历史记录、数据控制、第三方登录与支付对接 |
| 提示词工程   | 语言对白名单、例句生成控制、风格控制、难度控制               |
| 测试与验收   | 输入限制、分层配额、清理规则、导出能力                       |
| 法务与合规   | 使用条款、隐私政策、数据主体权利、留存与清理策略             |

## 1.4 实现范围

本节仅呈现 MVP 阶段的实现内容。输入仅接受单词或词组，若用户输入整句，系统提示改为词或词组。

### 1.4.1 语言对白名单

| 序号 | 语言对  | 模式说明                |
| ---- | ------- | ----------------------- |
| L1   | zh → en | zh 到 en 翻译           |
| L2   | en → zh | en 到 zh 翻译           |
| L3   | en → en | en 到 en 同语释义与例句 |
| L4   | zh → zh | zh 到 zh 同语释义与例句 |

同语模式不显示译文。

### 1.4.2 输入与查词规则

| 项目     | 规定                                                         |
| -------- | ------------------------------------------------------------ |
| 输入类型 | 仅接受单词或词组                                             |
| 句子输入 | 不接受，提示用户改为词或词组                                 |
| 上下文   | 支持简短词组输入以提升相关性                                 |
| 输出范围 | 词典具备的模块全部可输出，默认全部开启。用户可在设置中调整模块开关、顺序与详略级别 |
| 释义呈现 | 展示多义项并按相关性排序，不提供原因说明                     |
| 译文显示 | 默认显示译文，en → en 与 zh → zh 模式不显示译文              |

### 1.4.3 分层功能说明

再生成次数为全局日配额，用尽后次日恢复。

#### 1.4.3.1 普通档

**个性化例句**

| 项目     | 配置                                    |
| -------- | --------------------------------------- |
| 例句条数 | 默认 1 条，不可调                       |
| 译文     | 默认显示，en → en 与 zh → zh 不显示译文 |
| 难度切换 | 支持更简单或更难                        |
| 风格切换 | 支持口语、书面、学术、商务              |
| 再生成   | 1 次 / d                                |

**结果页模块**

| 模块               | 默认状态 | 优先级 | 默认条数或长度 | 详略级别 | 说明               |
| ------------------ | -------- | ------ | -------------- | -------- | ------------------ |
| 释义与义项         | 开启     | 1      | 3 个义项       | 中       | 按相关性排序       |
| 个性化例句         | 开启     | 2      | 1 条           | 中       | 支持难度与风格切换 |
| 常见搭配与固定搭配 | 开启     | 3      | 3 条           | 短       | 可展开更多         |
| 同义词与反义词     | 开启     | 5      | 4 项           | 短       | 词汇拓展           |
| 派生与词族         | 开启     | 6      | 2 项           | 短       | 展示形态关联       |
| 频率与考试标签     | 开启     | 7      | 徽标展示       | 短       | 暂不实现           |

**历史记录与数据控制**

| 项目       | 配置                                     |
| ---------- | ---------------------------------------- |
| 是否保存   | 默认开启，可关闭或启用无痕查询           |
| 留存策略   | 默认 10 d，上限 100 条，超限自动滚动清理 |
| 按语言清理 | 可清理 zh 组、清理 en 组或全部清空       |
| 导出能力   | CSV                                      |
| 删除语义   | 立即逻辑删除，物理清理延迟 7 d 执行      |

**个性化画像与风格偏好**

| 项目     | 内容                                                         |
| -------- | ------------------------------------------------------------ |
| 学习目标 | 支持考试、学术、职场、旅行、日常交流、阅读、写作，多选并可排序 |
| 专业背景 | 支持信息技术、金融、教育、医疗、法律、制造、媒体、艺术、其他，多选并可排序 |
| 年龄层次 | 0–11 岁、12–17 岁、18–24 岁、25–34 岁、35–44 岁、45 岁及以上，仅用于匹配，不对外展示 |
| 当前水平 | 支持 CEFR A1–C2、IELTS 总分与单项分、TOEFL iBT 总分与单项分、CET 分数、自评 1–10 分，用于可读性映射 |
| 语言对   | 用户从语言对白名单选择                                       |
| 风格标签 | 支持语域、体裁、语气、主题，多选并可排序，上限 3 个          |

#### 1.4.3.2 Plus 档

**个性化例句**

| 项目     | 配置                                    |
| -------- | --------------------------------------- |
| 例句条数 | 默认 3 条，可调 1–3 条                  |
| 译文     | 默认显示，en → en 与 zh → zh 不显示译文 |
| 难度切换 | 支持更简单或更难                        |
| 风格切换 | 支持口语、书面、学术、商务              |
| 再生成   | 10 次 / d                               |

**结果页模块**

| 模块               | 默认状态 | 优先级 | 默认条数或长度 | 详略级别 | 自定义能力                                 |
| ------------------ | -------- | ------ | -------------- | -------- | ------------------------------------------ |
| 释义与义项         | 开启     | 1      | 3 个义项       | 中       | 模块开关可调，顺序可调，详略可调           |
| 个性化例句         | 开启     | 2      | 3 条           | 中       | 模块开关可调，顺序可调，详略可调           |
| 常见搭配与固定搭配 | 开启     | 3      | 3 条           | 短       | 模块开关可调，顺序可调，详略可调           |
| 同义词与反义词     | 开启     | 5      | 4 项           | 短       | 模块开关可调，顺序可调，详略可调           |
| 派生与词族         | 开启     | 6      | 2 项           | 短       | 模块开关可调，顺序可调，详略可调           |
| 频率与考试标签     | 开启     | 7      | 徽标展示       | 短       | 模块开关可调，顺序可调，详略可调，暂不实现 |

**历史记录与数据控制**

| 项目       | 配置                                      |
| ---------- | ----------------------------------------- |
| 是否保存   | 默认开启，可关闭或启用无痕查询            |
| 留存策略   | 默认 90 d，上限 1000 条，超限自动滚动清理 |
| 按语言清理 | 可清理 zh 组、清理 en 组或全部清空        |
| 导出能力   | CSV 与 JSON，支持基础过滤                 |
| 删除语义   | 立即逻辑删除，物理清理延迟 7 d 执行       |

**个性化画像与风格偏好**

| 项目     | 内容                                                         |
| -------- | ------------------------------------------------------------ |
| 学习目标 | 支持考试、学术、职场、旅行、日常交流、阅读、写作，多选并可排序 |
| 专业背景 | 支持信息技术、金融、教育、医疗、法律、制造、媒体、艺术、其他，多选并可排序 |
| 年龄层次 | 0–11 岁、12–17 岁、18–24 岁、25–34 岁、35–44 岁、45 岁及以上，仅用于匹配，不对外展示 |
| 当前水平 | 支持 CEFR A1–C2、IELTS 总分与单项分、TOEFL iBT 总分与单项分、CET 分数、自评 1–10 分，用于可读性映射 |
| 语言对   | 用户从语言对白名单选择                                       |
| 风格标签 | 支持语域、体裁、语气、主题，多选并可排序，上限 5 个          |

#### 1.4.3.3 Pro 档

**个性化例句**

| 项目     | 配置                                    |
| -------- | --------------------------------------- |
| 例句条数 | 默认 5 条，可调 1–5 条                  |
| 译文     | 默认显示，en → en 与 zh → zh 不显示译文 |
| 难度切换 | 支持更简单或更难                        |
| 风格切换 | 支持口语、书面、学术、商务              |
| 再生成   | 20 次 / d                               |

**结果页模块**

| 模块               | 默认状态 | 优先级 | 默认条数或长度 | 详略级别 | 自定义能力                                                 |
| ------------------ | -------- | ------ | -------------- | -------- | ---------------------------------------------------------- |
| 释义与义项         | 开启     | 1      | 3 个义项       | 中       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好           |
| 个性化例句         | 开启     | 2      | 5 条           | 中       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好           |
| 常见搭配与固定搭配 | 开启     | 3      | 3 条           | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好           |
| 同义词与反义词     | 开启     | 5      | 4 项           | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好           |
| 派生与词族         | 开启     | 6      | 2 项           | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好           |
| 频率与考试标签     | 开启     | 7      | 徽标展示       | 短       | 模块开关、顺序、详略均可调整，支持词条级记忆偏好，暂不实现 |

**历史记录与数据控制**

| 项目       | 配置                                |
| ---------- | ----------------------------------- |
| 是否保存   | 默认开启，可关闭或启用无痕查询      |
| 留存策略   | 永久保留，用户主动清理前不自动删除  |
| 按语言清理 | 可清理 zh 组、清理 en 组或全部清空  |
| 导出能力   | CSV 与 JSON，支持条件过滤与批量导出 |
| 删除语义   | 立即逻辑删除，物理清理延迟 7 d 执行 |

**个性化画像与风格偏好**

| 项目     | 内容                                                         |
| -------- | ------------------------------------------------------------ |
| 学习目标 | 支持考试、学术、职场、旅行、日常交流、阅读、写作，多选并可排序 |
| 专业背景 | 支持信息技术、金融、教育、医疗、法律、制造、媒体、艺术、其他，多选并可排序 |
| 年龄层次 | 0–11 岁、12–17 岁、18–24 岁、25–34 岁、35–44 岁、45 岁及以上，仅用于匹配，不对外展示 |
| 当前水平 | 支持 CEFR A1–C2、IELTS 总分与单项分、TOEFL iBT 总分与单项分、CET 分数、自评 1–10 分，用于可读性映射 |
| 语言对   | 用户从语言对白名单选择                                       |
| 风格标签 | 支持语域、体裁、语气、主题，多选并可排序，上限 8 个          |

**统一详略级别基线**

| 级别 | 中文字符上限 | 英文字符上限 |
| ---- | ------------ | ------------ |
| 短   | 80 字符      | 120 字符     |
| 中   | 150 字符     | 220 字符     |
| 长   | 220 字符     | 320 字符     |

### 1.4.4 订阅与权益概览

| 能力项             | 普通档         | Plus 档         | Pro 档                     |
| ------------------ | -------------- | --------------- | -------------------------- |
| 每日查词上限       | 30 次 / d      | 100 次 / d      | 500 次 / d                 |
| 每次例句数量       | 1 条固定       | 3 条可调 1–3 条 | 5 条可调 1–5 条            |
| 再生成次数         | 1 次 / d       | 10 次 / d       | 20 次 / d                  |
| 历史留存默认与上限 | 10 d 与 100 条 | 90 d 与 1000 条 | 永久                       |
| 风格标签上限       | 3 个           | 5 个            | 8 个                       |
| 输出模块自定义     | 基础开关       | 高级自定义      | 高级自定义与词条级记忆偏好 |
| 导出能力           | CSV            | CSV 与 JSON     | CSV 与 JSON 条件过滤       |
| 并发与限速         | 基础           | 较宽            | 宽                         |

### 1.4.5 支付与账单

| 项目           | 说明                                       |
| -------------- | ------------------------------------------ |
| 订阅开通与续费 | 支付成功后权限即时生效。                   |
| 到期处理       | 到期后自动降级并同步能力边界。             |
| 账单与收据     | 展示订阅档位、生效时间、到期时间与订单号。 |
| 退款与异常     | 遵循目标平台规则，保持状态与权限幂等同步。 |

### 1.4.6 通用设置

| 设置项   | 取值                     | 默认值   |
| -------- | ------------------------ | -------- |
| 主题     | 浅色、深色、跟随系统     | 跟随系统 |
| 快捷键   | 提供默认方案，允许自定义 | 开启     |
| 界面语言 | zh、en                   | zh       |

### 1.4.7 技术实现最小集

| 模块            | 要求                                                         |
| --------------- | ------------------------------------------------------------ |
| Doubao API 适配 | 提供稳定封装、重试、超时、错误语义化、结构化契约与解析容错。 |
| 缓存与降级      | 对同一用户、同一词条、同一配置提供短时缓存。外部异常时降级为基础释义与模板例句并提示。 |
| 账户与订阅      | 提供注册、登录、第三方登录（微信、Apple、Google）。订阅状态与权限实时同步与对账。 |
| 历史记录        | 提供保存、清理、导出功能，支持按语言清理与全部清空。         |

## 1.5 文档约定

| 项目       | 规范                                                         |
| ---------- | ------------------------------------------------------------ |
| 需求编号   | 功能性需求使用前缀 FR 编号，非功能性需求使用前缀 NFR 编号，用例使用前缀 UC 编号，接口使用前缀 API 编号。 |
| 优先级     | 使用 Must、Should、Could、Will not 四级。                    |
| 时间与度量 | 响应时间使用 ms 或 s，容量使用 KB 或 MB，百分比保留 2 位小数。时间使用 UTC 存储，前端按本地时区渲染。 |

## 1.6 成功标准与关键指标

| 类别       | 指标                 | 目标              |
| ---------- | -------------------- | ----------------- |
| 性能       | 首屏查词端到端 P95   | ≤ 2.5 s           |
| 性能       | 首屏查词平均值       | ≤ 1.2 s           |
| 质量       | 结构化输出正确率     | ≥ 99%             |
| 质量       | 例句可理解度正反馈   | ≥ 80%             |
| 账号与订阅 | 登录成功率           | ≥ 99%             |
| 账号与订阅 | 订阅开通与续费成功率 | ≥ 98%             |
| 数据控制   | 清理与导出完成时间   | ≤ 5 s，并提供回执 |
| 数据控制   | 无痕查询留存         | 0 条              |

## 1.7 项目边界与基本假设

| 条目       | 内容                                                 |
| ---------- | ---------------------------------------------------- |
| 外部能力   | 仅对接 Doubao API，用于生成与理解。                  |
| 模型策略   | 不进行基础模型训练或微调。                           |
| 登录与支付 | 支持微信、Apple、Google 登录。支付遵循目标平台规则。 |
| 客户端形态 | 首期重点为 Web 与 H5。                               |
| 数据原则   | 数据采集最小化，用户可撤回同意，系统不提供收藏功能。 |

## 1.8 风险与依赖概览

| 风险或依赖           | 说明                                | 缓解措施                                     |
| -------------------- | ----------------------------------- | -------------------------------------------- |
| 外部接口限流或不可用 | Doubao API 或第三方登录、支付波动。 | 设置重试、超时、熔断、降级机制。             |
| 输入不合规           | 用户输入整句导致失败。              | 前端强校验并提示改为词或词组。               |
| 解析失败             | 结构化契约不满足影响渲染。          | 强化模板解析与兜底输出。                     |
| 订阅状态不同步       | 权限与配额更新不及时。              | 采用幂等更新、回调对账、轮询兜底。           |
| 历史清理误操作       | 用户错误清空数据。                  | 提示二次确认，延迟物理清理并设置可恢复窗口。 |

## 1.9 合规与隐私概览

| 条目               | 要求                                                       |
| ------------------ | ---------------------------------------------------------- |
| 使用条款与隐私政策 | 内置完整文本。首次登录展示同意提示，设置中提供撤回入口。   |
| 数据主体权利       | 用户可导出或删除数据，可关闭历史留存并设定清理周期。       |
| 数据留存           | 用户可定义留存时长与上限，支持按语言清理与全部清空。       |
| 安全基线           | 传输与存储加密，采用最小权限访问控制，对敏感数据脱敏存储。 |

## 1.8 风险与依赖概览

| 风险或依赖           | 说明                                | 缓解措施                                     |
| -------------------- | ----------------------------------- | -------------------------------------------- |
| 外部接口限流或不可用 | Doubao API 或第三方登录、支付波动。 | 设置重试、超时、熔断、降级机制。             |
| 输入不合规           | 用户输入整句导致失败。              | 前端强校验并提示改为词或词组。               |
| 解析失败             | 结构化契约不满足影响渲染。          | 强化模板解析与兜底输出。                     |
| 订阅状态不同步       | 权限与配额更新不及时。              | 采用幂等更新、回调对账、轮询兜底。           |
| 历史清理误操作       | 用户错误清空数据。                  | 提示二次确认，延迟物理清理并设置可恢复窗口。 |

## 1.9 合规与隐私概览

| 条目               | 要求                                                       |
| ------------------ | ---------------------------------------------------------- |
| 使用条款与隐私政策 | 内置完整文本。首次登录展示同意提示，设置中提供撤回入口。   |
| 数据主体权利       | 用户可导出或删除数据，可关闭历史留存并设定清理周期。       |
| 数据留存           | 用户可定义留存时长与上限，支持按语言清理与全部清空。       |
| 安全基线           | 传输与存储加密，采用最小权限访问控制，对敏感数据脱敏存储。 |