# website/src 层级约定

本规范覆盖 `website/src` 目录下的全部子项，用于指导文件归档与后续扩展时的职责边界。规划遵循“应用层负责组合、领域层保持纯净、共享层沉淀能力”的长期演进思路。

## 目录角色说明

- `__tests__`：
  - 存放针对 `src` 范围内公共契约的端到端与高阶集成测试。
  - 测试文件需显式声明依赖的应用层入口，禁止绕过应用层直接操作实现细节。
- `app/`：
  - 聚焦 UI 层路由、页面装配与布局容器，确保只依赖领域与共享暴露的稳定接口。
  - 推荐引入适配器或容器组件承载副作用，将展示组件保持为纯函数。
- `core/`：
  - 承载跨特性复用的领域模型、状态管理、数据编排与协议适配，必须无 UI 依赖。
  - 新增子模块前需在此记录抽象边界与可替换策略，避免一次性脚本式实现。
- `features/`：
  - 面向业务场景的纵向切片，聚合页面片段、hooks、服务调用等，实现端到端闭环。
  - 每个特性子目录应提供清晰的公共出口（例如 `index.ts`），并在文档中描述可复用契约。
- `shared/`：
  - 存放可被多个特性复用的 UI 组件、hooks、工具函数与设计令牌，实现跨层能力沉淀。
  - 共享模块必须保持副作用最小化，输出纯函数或显式声明依赖的构造器。
  - `styles/themes/`：
    - 归档跨主题共享的 CSS 变量覆写，按主题拆分文件，替代过去在单一 index.css 内硬编码覆盖的方案，便于后续扩展夜间/品牌主题。
- `index.css` 与 `tailwind.css`：
  - 维护全局样式基线与设计系统令牌，禁止直接写入特定页面样式以免污染作用域。
  - 调整时需同步审视设计体系文档，保持令牌命名一致性与渐进式演进。
- `main.jsx`：
  - 应用入口，负责挂载根组件、注入全局 Provider 与跨应用配置。
  - 在新增 Provider 时，需同步在此文件记录装配顺序与依赖关系，避免隐式耦合。

## 扩展与演进约束

- 新建目录前，应先在本文档中补充该目录的职责描述与替代方案评估，确保结构演进可追溯。
- 引入第三方依赖或跨层通信方式时，必须在相应目录的 `README.md` 或 `AGENTS.md` 中记录设计取舍。
- 任何需要临时脚本或一次性迁移的内容，应放置于 `ops/` 或独立工具库，而非 `src` 下。

> 修改此文档时请保持条目按字母或职责优先级排序，并确保 Markdown 空格符合顶层军规要求。
