# Chat 页面目录军规

## 结构愿景

- **目标定位**：本目录承载聊天页面的 UI 装配层，实现视图声明、交互桥接与验收级测试，保持对领域层与共享能力的最小依赖。设计遵循“容器负责编排，组件保持纯净”的长期演进原则。
- **设计模式取舍**：默认采用 *容器-展示* 模式以及 *端口-适配器* 思路，通过清晰的入口组件与适配层承接跨层协议；拒绝将一次性脚本或数据拉取逻辑堆叠在页面根组件中。

## 目录分工

- `ChatView.jsx`
  - 页面入口组件，负责组装聊天上下文、挂载必要的 Provider，并以依赖注入方式接入核心业务动作。
  - 仅引用共享组件与核心 store 暴露的接口；如需新增副作用，请通过自定义 hook 抽象，确保组件本身保持声明式渲染。
- `ChatView.module.css`
  - 聊天页面的局部样式来源，限定作用域于当前页面，禁止引入全局样式或修改设计令牌。
  - 样式命名需体现语义与布局层级，推荐按“区域 + 职责”组合，便于后续维护。
- `__tests__/`
  - 存放聊天页面的可执行用例，覆盖路由装配、关键交互与边界行为。
  - 测试需通过页面公开 API 驱动，不得直接引用实现细节；新增测试文件时需在文件头部记录测试目的、前置条件与断言策略。

## 扩展约束

- 新增文件或子目录前，先评估是否可复用核心层或共享层能力；若确需扩展，必须同步更新本文档并说明与现有结构的协作方式。
- 引入第三方依赖或协议适配器时，务必在提交中说明安全性、维护成本与替代方案；默认优先复用内部封装。
- 移除文件时需确认对应路由、测试与依赖的影响面，并提供回滚策略。
