/**
 * 背景：
 *  - Loader 视觉体系改为“灰底 + 黑色遮罩”双层结构，需避免旧版滤镜导致的闪烁与色偏。
 * 目的：
 *  - 通过 CSS 模块定义基础层、覆盖层与遮罩动画，统一尺寸 token 并控制揭示节奏。
 * 关键决策与取舍：
 *  - 采用 clip-path 而非 mask，减少浏览器兼容性差异；
 *  - 使用 CSS 变量承载策略层传递的尺寸与动画时长，便于未来主题扩展。
 */
.loader {
  display: grid;
  place-items: center;
  inline-size: 100%;
  min-block-size: var(--vh, 100vh);
  padding: var(--space-4);
  background: transparent;
}

.symbol {
  position: relative;
  inline-size: min(
    80vw,
    calc(var(--waiting-frame-aspect-ratio) * var(--waiting-frame-height))
  );
  block-size: var(--waiting-frame-height);
  aspect-ratio: var(--waiting-frame-aspect-ratio);
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  box-shadow: none;
  border-radius: 0;
  isolation: isolate;
}

.frame {
  position: relative;
  inline-size: 100%;
  block-size: 100%;
  overflow: hidden;
}

.frame-base,
.frame-overlay {
  inline-size: 100%;
  block-size: 100%;
  display: block;
  object-fit: contain;
}

.frame-base {
  filter: grayscale(1) brightness(1.2);
}

.frame-overlay {
  position: absolute;
  inset: 0;
  filter: none;
  pointer-events: none;
  transition: clip-path var(--waiting-reveal-duration, 900ms) ease-out;
  clip-path: inset(100% 0 0 0);
}

.frame-overlay-revealed {
  clip-path: inset(0 0 0 0);
}

.label {
  position: absolute;
  inline-size: 1px;
  block-size: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

@media (width <= 480px) {
  .symbol {
    inline-size: min(
      90vw,
      calc(var(--waiting-frame-aspect-ratio) * var(--waiting-frame-height))
    );
  }
}
