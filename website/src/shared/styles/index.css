@import url("@shared/theme/colors.css");
@import url("@shared/theme/variables.css");
@import url("@shared/theme/spacing.css");
@import url("@shared/theme/typography.css");
@import url("@shared/styles/tokens.menu.css");

:root {
  font-family: var(--font-family-base);
  line-height: 1.5;
  font-weight: 400;
  font-synthesis: none;
  text-rendering: optimizelegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  --vh: 100vh;

  /* 高亮统一走黑白体系，链接单独复用品牌色，避免语义混淆。 */
  --highlight-color: var(--hl-dark);
  --link-color: var(--color-link-light);
  --shadow-color: rgb(0 0 0 / 15%);

  /* Loader 动画需感知主题，默认以深色文字基调渲染扁平矩形。 */
  --loader-bar-tone: var(--neutral-900);
  --color-overlay: color-mix(
    in srgb,
    var(--color-overlay-base),
    transparent 50%
  );
  --color-overlay-strong: color-mix(
    in srgb,
    var(--color-overlay-base),
    transparent 25%
  );
  --color-overlay-weak: color-mix(
    in srgb,
    var(--color-overlay-base),
    transparent 95%
  );
  --color-overlay-inverse: color-mix(
    in srgb,
    var(--color-overlay-inverse-base),
    transparent 90%
  );
}

@supports (height: 100dvh) {
  :root {
    --vh: 100dvh;
  }
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

:root[data-theme="dark"] {
  color-scheme: dark;
  color: var(--sys-text-dark);
  background-color: var(--sys-bg-dark);

  --highlight-color: var(--hl-light);
  --link-color: var(--color-link-dark);
  --app-bg: var(--neutral-900);
  --app-color: var(--text-primary-dark);
  --chat-window-bg: var(--neutral-900);
  --chat-bubble-bg: var(--neutral-800);
  --chat-bubble-user-bg: var(--brand-surface-dark);
  --body-bg: var(--neutral-950);
  --sidebar-surface: #14161a;
  --sidebar-panel: #14161a;
  --sidebar-border-color: #2b2f34;
  --sidebar-hover-bg: #1a1e24;
  --sidebar-active-bg: #232833;
  --sidebar-text-color: #edeff2;
  --sidebar-muted-color: #a3a9b3;
  --sidebar-shadow-elevated: var(--night-shadow);
  --sidebar-input-bg: #1d2027;
  --sidebar-input-ring: #2b3038;
  --sidebar-bg: var(--sidebar-surface);
  --sidebar-color: var(--sidebar-text-color);
  --input-bg: var(--neutral-900);
  --border-color: var(--sys-border-dark);
  --text-muted: var(--sys-muted);
  --shadow-color: rgb(0 0 0 / 40%);
  --loader-bar-tone: var(--neutral-0);
  --primary-bg: var(--neutral-50);
  --primary-color: var(--neutral-900);
  --color-text: var(--text-primary-dark);
  --color-text-inverse: var(--text-inverse-dark);
  --color-text-secondary: var(--text-secondary);
  --color-text-tertiary: var(--text-tertiary);
  --color-surface-muted: var(--surface-muted);
  --color-surface-alt: var(--surface-alt);
}

:root[data-theme="light"] {
  color-scheme: light;
  color: var(--sys-text-light);
  background-color: var(--sys-bg-light);

  --highlight-color: var(--hl-dark);
  --link-color: var(--color-link-light);
  --app-bg: var(--neutral-50);
  --app-color: var(--text-primary-light);
  --chat-window-bg: var(--neutral-0);
  --chat-bubble-bg: var(--neutral-100);
  --chat-bubble-user-bg: var(--brand-surface-light);
  --body-bg: var(--neutral-0);
  --sidebar-surface: #f5f7fb;
  --sidebar-panel: #fff;
  --sidebar-border-color: #d9dde7;
  --sidebar-hover-bg: rgb(15 17 21 / 6%);
  --sidebar-active-bg: rgb(15 17 21 / 12%);
  --sidebar-text-color: var(--text-primary-light);
  --sidebar-muted-color: color-mix(
    in srgb,
    var(--text-primary-light) 55%,
    transparent
  );
  --sidebar-shadow-elevated: 0 18px 42px rgb(31 35 43 / 16%);
  --sidebar-input-bg: #eef1f6;
  --sidebar-input-ring: #cfd4e2;
  --sidebar-bg: var(--sidebar-surface);
  --sidebar-color: var(--sidebar-text-color);
  --input-bg: var(--neutral-0);
  --border-color: var(--sys-border-light);
  --text-muted: var(--sys-muted);
  --shadow-color: rgb(0 0 0 / 15%);
  --loader-bar-tone: var(--neutral-900);
  --primary-bg: var(--neutral-900);
  --primary-color: var(--neutral-50);
  --color-text: var(--text-primary-light);
  --color-text-inverse: var(--text-inverse-light);
  --color-text-secondary: var(--text-secondary);
  --color-text-tertiary: var(--text-tertiary);
  --color-surface-muted: var(--surface-muted);
  --color-surface-alt: var(--surface-alt);
}

a {
  font-weight: 500;
  color: var(--link-color);
  text-decoration: inherit;
}

a:hover {
  color: var(--link-color);
}

:root[data-theme="light"] a:hover {
  color: var(--link-color);
}

body {
  margin: 0;
  min-width: 320px;
  min-height: var(--vh);
  overflow-y: auto;
}

#root {
  min-height: var(--vh);
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

textarea {
  /*
   * 背景：各页面的 textarea 默认允许浏览器自由 resize，造成与整体排版节奏不一致，
   *       且干扰后续在不同布局中维护统一高度。
   * 取舍：全局禁用 resize，下放具体高度控制给组件自身，确保体验与设计规范统一。
   */
  resize: none;
}
